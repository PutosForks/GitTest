-------------------------------------------------
-- Export file for user CMD_MFE                --
-- Created by 502413934 on 11.1.2018, 14:43:57 --
-------------------------------------------------

set define off
spool db.log

prompt
prompt Creating table CON_ASSISTANT
prompt ============================
prompt
create table CMD_MFE.CON_ASSISTANT
(
  id_assistant NUMBER(16) not null,
  id_prop      NUMBER(16) not null,
  id_template  NUMBER(16) not null,
  comment_text VARCHAR2(2000)
)
;
comment on table CMD_MFE.CON_ASSISTANT
  is 'Asistent';
comment on column CMD_MFE.CON_ASSISTANT.id_assistant
  is 'ID';
comment on column CMD_MFE.CON_ASSISTANT.id_prop
  is 'ID navrhu';
comment on column CMD_MFE.CON_ASSISTANT.id_template
  is 'ID öablony';
comment on column CMD_MFE.CON_ASSISTANT.comment_text
  is 'Koment·¯';
create index CMD_MFE.IX_ASSISTANT_TEMPLATE on CMD_MFE.CON_ASSISTANT (ID_TEMPLATE);
alter table CMD_MFE.CON_ASSISTANT
  add constraint PK_ASSISTANT_ID primary key (ID_ASSISTANT);
alter table CMD_MFE.CON_ASSISTANT
  add constraint CS_ASSISTANT_PROP_UQ unique (ID_PROP);
grant select on CMD_MFE.CON_ASSISTANT to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_ASSISTANT to DBDEVELOP;
grant select on CMD_MFE.CON_ASSISTANT to DBREAD;

prompt
prompt Creating table CON_BB_GROUP
prompt ===========================
prompt
create table CMD_MFE.CON_BB_GROUP
(
  id_bb_group NUMBER(16) not null,
  name        VARCHAR2(128) not null
)
;
alter table CMD_MFE.CON_BB_GROUP
  add constraint PK_BB_GROUP primary key (ID_BB_GROUP);
grant select on CMD_MFE.CON_BB_GROUP to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_BB_GROUP to DBDEVELOP;
grant select on CMD_MFE.CON_BB_GROUP to DBREAD;

prompt
prompt Creating table CON_CATEGORY
prompt ===========================
prompt
create table CMD_MFE.CON_CATEGORY
(
  id_category NUMBER(16) not null,
  id_parent   NUMBER(16),
  code        VARCHAR2(3) not null,
  title       VARCHAR2(128) not null,
  description VARCHAR2(1024) not null,
  user_order  INTEGER
)
;
comment on table CMD_MFE.CON_CATEGORY
  is 'Skupina/kategorie vzoru podmÌnky';
comment on column CMD_MFE.CON_CATEGORY.id_category
  is 'ID';
comment on column CMD_MFE.CON_CATEGORY.id_parent
  is 'ID rodice';
comment on column CMD_MFE.CON_CATEGORY.code
  is 'Reg cislo kategorie';
comment on column CMD_MFE.CON_CATEGORY.title
  is 'Nazev';
comment on column CMD_MFE.CON_CATEGORY.description
  is 'Popis';
comment on column CMD_MFE.CON_CATEGORY.user_order
  is 'Uzivatelske poradi v selectu';
create index CMD_MFE.IX_CATEGORY_PARENT on CMD_MFE.CON_CATEGORY (ID_PARENT);
alter table CMD_MFE.CON_CATEGORY
  add constraint PK_CATEGORY_ID primary key (ID_CATEGORY);
alter table CMD_MFE.CON_CATEGORY
  add constraint CS_CATEGORY_PARENT_CODE unique (ID_PARENT, CODE);
alter table CMD_MFE.CON_CATEGORY
  add constraint FK_CATEGORY_PARENT foreign key (ID_PARENT)
  references CMD_MFE.CON_CATEGORY (ID_CATEGORY) on delete set null;
grant select on CMD_MFE.CON_CATEGORY to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_CATEGORY to DBDEVELOP;
grant select on CMD_MFE.CON_CATEGORY to DBREAD;

prompt
prompt Creating table CON_CHECKLIST
prompt ============================
prompt
create table CMD_MFE.CON_CHECKLIST
(
  id    NUMBER(16) not null,
  title VARCHAR2(32 CHAR) not null
)
;
comment on table CMD_MFE.CON_CHECKLIST
  is 'Typ checklistu';
alter table CMD_MFE.CON_CHECKLIST
  add constraint PK_CHECKLIST primary key (ID);
alter table CMD_MFE.CON_CHECKLIST
  add constraint CS_CHECKLIST_TITLE unique (TITLE);
grant select on CMD_MFE.CON_CHECKLIST to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_CHECKLIST to DBDEVELOP;
grant select on CMD_MFE.CON_CHECKLIST to DBREAD;

prompt
prompt Creating table CON_CHECK_MODEL
prompt ==============================
prompt
create table CMD_MFE.CON_CHECK_MODEL
(
  id           NUMBER(16) not null,
  id_checklist NUMBER(16) not null,
  created_at   DATE default SYSDATE not null,
  cancelled_at DATE
)
;
comment on table CMD_MFE.CON_CHECK_MODEL
  is 'Vzor checku';
create index CMD_MFE.IX_CHECK_MODEL_CHECKLIST on CMD_MFE.CON_CHECK_MODEL (ID_CHECKLIST);
alter table CMD_MFE.CON_CHECK_MODEL
  add constraint PK_CHECK_MODEL primary key (ID);
alter table CMD_MFE.CON_CHECK_MODEL
  add constraint FK_CHECK_MODEL_CHECKLIST foreign key (ID_CHECKLIST)
  references CMD_MFE.CON_CHECKLIST (ID);
grant select, insert, update, delete on CMD_MFE.CON_CHECK_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_CHECK_MODEL to DBDEVELOP;
grant select on CMD_MFE.CON_CHECK_MODEL to DBREAD;

prompt
prompt Creating table CON_COND_MODEL
prompt =============================
prompt
create table CMD_MFE.CON_COND_MODEL
(
  id_cond_model            NUMBER(16) not null,
  id_category              NUMBER(16),
  id_current_ver           NUMBER(16) not null,
  id_cond_props            NUMBER(16) not null,
  expired                  NUMBER(1) default 0 not null,
  secret                   NUMBER(1) default 0 not null,
  asd_description          VARCHAR2(2000),
  user_order               INTEGER,
  is_contractual           INTEGER default 0 not null,
  ct_frag_calc             INTEGER default 0 not null,
  fulfill_cond_one_comment CHAR(1) default 0 not null,
  fast_track               NUMBER(1) default 0
)
;
comment on table CMD_MFE.CON_COND_MODEL
  is 'Vzor podm√≠nky';
comment on column CMD_MFE.CON_COND_MODEL.id_cond_model
  is 'ID vzoru';
comment on column CMD_MFE.CON_COND_MODEL.id_category
  is 'ID skupiny vzoru';
comment on column CMD_MFE.CON_COND_MODEL.id_current_ver
  is 'ID posledn√≠/aktu√°ln√≠ verze vzoru podm√≠nky';
comment on column CMD_MFE.CON_COND_MODEL.id_cond_props
  is 'ID vlastnost√≠ pro podm√≠nky (vlastn√≠ch/standardn√≠ch)';
comment on column CMD_MFE.CON_COND_MODEL.expired
  is 'P≈ô√≠znak neaktu√°lnosti';
comment on column CMD_MFE.CON_COND_MODEL.secret
  is 'Tajn√Ω k√≥d';
comment on column CMD_MFE.CON_COND_MODEL.asd_description
  is 'Popis podm√≠nky pro ASD';
comment on column CMD_MFE.CON_COND_MODEL.user_order
  is 'Uzivatelsky definovane poradi v selectu';
comment on column CMD_MFE.CON_COND_MODEL.is_contractual
  is 'Smluvni nesmluvni';
comment on column CMD_MFE.CON_COND_MODEL.ct_frag_calc
  is 'priznak 1 pro podminky, u kterych budeme dopocitavat fragment dle stanoveneho indikatoru';
comment on column CMD_MFE.CON_COND_MODEL.fulfill_cond_one_comment
  is 'Plneni podminek - kopirovat komentar';
comment on column CMD_MFE.CON_COND_MODEL.fast_track
  is 'informace jestli dan√° podm√≠nka znamen√° p√∏echod do fast tracku';
create index CMD_MFE.IX_COND_MODEL_CATEGORY on CMD_MFE.CON_COND_MODEL (ID_CATEGORY);
create index CMD_MFE.IX_COND_MODEL_COND_PROPS on CMD_MFE.CON_COND_MODEL (ID_COND_PROPS);
create index CMD_MFE.IX_COND_MODEL_CURRENT_VER on CMD_MFE.CON_COND_MODEL (ID_CURRENT_VER);
alter table CMD_MFE.CON_COND_MODEL
  add constraint PK_COND_MODEL_ID primary key (ID_COND_MODEL);
alter table CMD_MFE.CON_COND_MODEL
  add constraint FK_COND_MODEL_CATEGORY foreign key (ID_CATEGORY)
  references CMD_MFE.CON_CATEGORY (ID_CATEGORY) on delete set null;
alter table CMD_MFE.CON_COND_MODEL
  add constraint FK_COND_MODEL_COND_PROPS foreign key (ID_COND_PROPS)
  references CMD_MFE.CON_COND_PROPS (ID_COND_PROPS) on delete cascade;
alter table CMD_MFE.CON_COND_MODEL
  add constraint FK_COND_MODEL_CURRENT_VER foreign key (ID_CURRENT_VER)
  references CMD_MFE.CON_COND_MODEL_VER (ID_COND_MODEL_VER)
  deferrable initially deferred;
alter table CMD_MFE.CON_COND_MODEL
  add constraint CK_CT_FRAG_CALC
  check (CT_FRAG_CALC IN ('0','1'));
alter table CMD_MFE.CON_COND_MODEL
  add constraint CK_FULFILL_COND_ONE_COMMENT
  check (FULFILL_COND_ONE_COMMENT IN ('0','1'));
alter table CMD_MFE.CON_COND_MODEL
  add constraint CS_COND_MODEL_CONTRACTUAL
  check (is_CONTRACTUAL IN (0,1));
alter table CMD_MFE.CON_COND_MODEL
  add constraint CS_COND_MODEL_EXPIRED
  check (expired IN (0, 1));
alter table CMD_MFE.CON_COND_MODEL
  add constraint CS_COND_MODEL_SECRET
  check (secret IN (0, 1));
grant select, insert, update, delete on CMD_MFE.CON_COND_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_COND_MODEL to DBDEVELOP;
grant select on CMD_MFE.CON_COND_MODEL to DBREAD;

prompt
prompt Creating table CON_COND_MODEL_VER
prompt =================================
prompt
create table CMD_MFE.CON_COND_MODEL_VER
(
  id_cond_model_ver   NUMBER(16) not null,
  id_cond_model       NUMBER(16) not null,
  created_at          DATE default SYSDATE not null,
  old_id              VARCHAR2(50),
  migration_flag      VARCHAR2(6) default 'MANUAL',
  processed           NUMBER default 0,
  revision_parent_id  NUMBER,
  revision_comment    VARCHAR2(2000),
  publish_status      VARCHAR2(15),
  version             NUMBER,
  coloured_flag       CHAR(1) not null,
  comment_result_flag CHAR(1) default '1' not null
)
;
comment on table CMD_MFE.CON_COND_MODEL_VER
  is 'Verze vzoru podminky';
comment on column CMD_MFE.CON_COND_MODEL_VER.id_cond_model_ver
  is 'ID';
comment on column CMD_MFE.CON_COND_MODEL_VER.id_cond_model
  is 'ID vzoru podminky';
comment on column CMD_MFE.CON_COND_MODEL_VER.created_at
  is 'Datum vytvo¯enÌ';
comment on column CMD_MFE.CON_COND_MODEL_VER.old_id
  is 'StarÈ ID';
comment on column CMD_MFE.CON_COND_MODEL_VER.migration_flag
  is 'Info k migraci';
comment on column CMD_MFE.CON_COND_MODEL_VER.processed
  is 'Zpracovano';
comment on column CMD_MFE.CON_COND_MODEL_VER.revision_parent_id
  is 'Predchozi verze';
comment on column CMD_MFE.CON_COND_MODEL_VER.revision_comment
  is 'Komentar k verzi';
comment on column CMD_MFE.CON_COND_MODEL_VER.publish_status
  is 'Status publikace';
comment on column CMD_MFE.CON_COND_MODEL_VER.coloured_flag
  is 'Priznak podbarveni - HCisAnoNE';
comment on column CMD_MFE.CON_COND_MODEL_VER.comment_result_flag
  is 'Priznak vyhodnoceni komentovani - HCisAnoNE';
create index CMD_MFE.IX_COND_MODEL_VER_BASE on CMD_MFE.CON_COND_MODEL_VER (ID_COND_MODEL);
alter table CMD_MFE.CON_COND_MODEL_VER
  add constraint PK_COND_MODEL_VER_ID primary key (ID_COND_MODEL_VER);
alter table CMD_MFE.CON_COND_MODEL_VER
  add constraint FK_COND_MODEL_VER_BASE foreign key (ID_COND_MODEL)
  references CMD_MFE.CON_COND_MODEL (ID_COND_MODEL) on delete cascade;
alter table CMD_MFE.CON_COND_MODEL_VER
  add constraint CK_MODEL_VER_COLORED
  check (coloured_flag in ('0', '1'));
alter table CMD_MFE.CON_COND_MODEL_VER
  add constraint CK_MODEL_VER_COMM_RF
  check (comment_result_flag in ('0', '1'));
grant select, insert, update, delete on CMD_MFE.CON_COND_MODEL_VER to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_COND_MODEL_VER to DBDEVELOP;
grant select on CMD_MFE.CON_COND_MODEL_VER to DBREAD;

prompt
prompt Creating table CON_COND_PROPS
prompt =============================
prompt
create table CMD_MFE.CON_COND_PROPS
(
  id_cond_props     NUMBER(16) not null,
  code              VARCHAR2(7) not null,
  title             VARCHAR2(256) not null,
  placement         VARCHAR2(50),
  kind              VARCHAR2(50) not null,
  covenant          NUMBER(1) default 0 not null,
  benevolence       VARCHAR2(50),
  biz_year_affected NUMBER(1) default 0 not null
)
;
comment on column CMD_MFE.CON_COND_PROPS.id_cond_props
  is 'Id ';
comment on column CMD_MFE.CON_COND_PROPS.code
  is 'Registracni cislo podminky';
comment on column CMD_MFE.CON_COND_PROPS.title
  is 'Nazev podminky';
comment on column CMD_MFE.CON_COND_PROPS.placement
  is 'Umisteni ve smlouve';
comment on column CMD_MFE.CON_COND_PROPS.kind
  is 'Typ podminky (klientsk·/obchodnÌ)';
comment on column CMD_MFE.CON_COND_PROPS.covenant
  is 'P¯Ìznak kovenanty';
comment on column CMD_MFE.CON_COND_PROPS.benevolence
  is 'P¯Ìznak, kter˝ typ benevolence se m˘ûe uplatit u termÌn˘ tÈto podmÌnky';
comment on column CMD_MFE.CON_COND_PROPS.biz_year_affected
  is 'P¯Ìznak, zda jsou termÌny tÈto podmÌnky ovlivnÏny hospod·¯sk˝m rokem';
alter table CMD_MFE.CON_COND_PROPS
  add constraint PK_COND_PROPS_ID primary key (ID_COND_PROPS);
alter table CMD_MFE.CON_COND_PROPS
  add constraint UQ_CON_COND_CODE unique (CODE);
alter table CMD_MFE.CON_COND_PROPS
  add constraint CS_COND_PROPS_CODE_CHECK
  check (LENGTH(code) > 1);
alter table CMD_MFE.CON_COND_PROPS
  add constraint CS_COND_PROPS_COVENANT
  check (covenant IN (0, 1));
alter table CMD_MFE.CON_COND_PROPS
  add constraint CS_COND_PROPS_KIND
  check (kind IN (
            'DEAL',
            'CLIENT'
        ));
grant select, insert, update, delete on CMD_MFE.CON_COND_PROPS to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_COND_PROPS to DBDEVELOP;
grant select on CMD_MFE.CON_COND_PROPS to DBREAD;

prompt
prompt Creating table CON_COND_CHECK_MODEL
prompt ===================================
prompt
create table CMD_MFE.CON_COND_CHECK_MODEL
(
  id_check_model NUMBER(16) not null,
  id_cond_model  NUMBER(16) not null
)
;
comment on table CMD_MFE.CON_COND_CHECK_MODEL
  is 'Vazba vzoru podminky na model checklistu';
create index CMD_MFE.IX_C_CH_M_COND_MODEL on CMD_MFE.CON_COND_CHECK_MODEL (ID_COND_MODEL);
alter table CMD_MFE.CON_COND_CHECK_MODEL
  add constraint PK_COND_CHECK_MODEL primary key (ID_CHECK_MODEL);
alter table CMD_MFE.CON_COND_CHECK_MODEL
  add constraint FK_C_CH_M_CHECK_MODEL foreign key (ID_CHECK_MODEL)
  references CMD_MFE.CON_CHECK_MODEL (ID) on delete cascade;
alter table CMD_MFE.CON_COND_CHECK_MODEL
  add constraint FK_C_CH_M_COND_MODEL foreign key (ID_COND_MODEL)
  references CMD_MFE.CON_COND_MODEL (ID_COND_MODEL) on delete cascade;
grant select, insert, update, delete on CMD_MFE.CON_COND_CHECK_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_COND_CHECK_MODEL to DBDEVELOP;
grant select on CMD_MFE.CON_COND_CHECK_MODEL to DBREAD;

prompt
prompt Creating table CON_DOC_TYPE_CATEGORY
prompt ====================================
prompt
create table CMD_MFE.CON_DOC_TYPE_CATEGORY
(
  id_category NUMBER not null,
  title       VARCHAR2(50)
)
;
alter table CMD_MFE.CON_DOC_TYPE_CATEGORY
  add constraint PK_CON_DOC_TYPE_CATEGORY primary key (ID_CATEGORY);
grant select, insert, update, delete on CMD_MFE.CON_DOC_TYPE_CATEGORY to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_DOC_TYPE_CATEGORY to DBDEVELOP;
grant select on CMD_MFE.CON_DOC_TYPE_CATEGORY to DBREAD;

prompt
prompt Creating table CON_DOC_TYPE
prompt ===========================
prompt
create table CMD_MFE.CON_DOC_TYPE
(
  id               NUMBER(16) not null,
  ordering         NUMBER(4),
  first_reminder   NUMBER(3),
  info_format      VARCHAR2(256),
  activity         NUMBER(1) default 1 not null,
  doc_type_name    VARCHAR2(256),
  id_category      NUMBER(16),
  id_category_tmp  NUMBER(16),
  pledge_agreement INTEGER default 0
)
;
comment on column CMD_MFE.CON_DOC_TYPE.id
  is 'Id typu dokumentu';
comment on column CMD_MFE.CON_DOC_TYPE.ordering
  is 'UûivatelskÈ po¯adÌ';
comment on column CMD_MFE.CON_DOC_TYPE.first_reminder
  is 'PrvnÌ upomÌnka (poËet dnÌ)';
comment on column CMD_MFE.CON_DOC_TYPE.info_format
  is 'Form·t koment·¯e instance dokumentu';
comment on column CMD_MFE.CON_DOC_TYPE.activity
  is 'Aktivita';
alter table CMD_MFE.CON_DOC_TYPE
  add constraint PK_DOC_TYPE primary key (ID);
alter table CMD_MFE.CON_DOC_TYPE
  add constraint FK_DOC_TYPE_CATEGORY foreign key (ID_CATEGORY)
  references CMD_MFE.CON_DOC_TYPE_CATEGORY (ID_CATEGORY);
alter table CMD_MFE.CON_DOC_TYPE
  add constraint CK_PLEDGE_AGREEMENT
  check (pledge_agreement IN (1,0));
alter table CMD_MFE.CON_DOC_TYPE
  add constraint CS_DOC_TYPE_ACTIVITY
  check (activity IN (0, 1));
grant select, insert, update, delete on CMD_MFE.CON_DOC_TYPE to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_DOC_TYPE to DBDEVELOP;
grant select on CMD_MFE.CON_DOC_TYPE to DBREAD;

prompt
prompt Creating table CON_CHECK_MODEL2DOC_TYPE
prompt =======================================
prompt
create table CMD_MFE.CON_CHECK_MODEL2DOC_TYPE
(
  id_check_model NUMBER(16) not null,
  id_doc_type    NUMBER(16) not null
)
;
comment on table CMD_MFE.CON_CHECK_MODEL2DOC_TYPE
  is 'Vazba vzor checku na typ dokumentu';
alter table CMD_MFE.CON_CHECK_MODEL2DOC_TYPE
  add constraint PK_CHECK_MODEL2DOC_TYPE primary key (ID_CHECK_MODEL, ID_DOC_TYPE);
alter table CMD_MFE.CON_CHECK_MODEL2DOC_TYPE
  add constraint FK_C_M2D_T_CHECK_MODEL foreign key (ID_CHECK_MODEL)
  references CMD_MFE.CON_COND_CHECK_MODEL (ID_CHECK_MODEL) on delete cascade;
alter table CMD_MFE.CON_CHECK_MODEL2DOC_TYPE
  add constraint FK_C_M2D_T_DOC_TYPE foreign key (ID_DOC_TYPE)
  references CMD_MFE.CON_DOC_TYPE (ID);
grant select, insert, update, delete on CMD_MFE.CON_CHECK_MODEL2DOC_TYPE to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_CHECK_MODEL2DOC_TYPE to DBDEVELOP;
grant select on CMD_MFE.CON_CHECK_MODEL2DOC_TYPE to DBREAD;

prompt
prompt Creating table CON_CHECK_MODEL2STATUS
prompt =====================================
prompt
create table CMD_MFE.CON_CHECK_MODEL2STATUS
(
  id_check_model NUMBER(16) not null,
  status         VARCHAR2(32 CHAR) not null
)
;
comment on table CMD_MFE.CON_CHECK_MODEL2STATUS
  is 'Stavy modelu statickych checklistu';
comment on column CMD_MFE.CON_CHECK_MODEL2STATUS.id_check_model
  is 'Id vzoru checku';
comment on column CMD_MFE.CON_CHECK_MODEL2STATUS.status
  is 'Stav, kter˝ m˘ûe check (vytvo¯en˝ dle vzoru checku) nab˝vat';
alter table CMD_MFE.CON_CHECK_MODEL2STATUS
  add constraint PK_CHECK_MODEL2STATUS primary key (ID_CHECK_MODEL, STATUS);
alter table CMD_MFE.CON_CHECK_MODEL2STATUS
  add constraint FK_CH_M2S_CHECK_MODEL foreign key (ID_CHECK_MODEL)
  references CMD_MFE.CON_CHECK_MODEL (ID) on delete cascade;
grant select on CMD_MFE.CON_CHECK_MODEL2STATUS to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_CHECK_MODEL2STATUS to DBDEVELOP;
grant select on CMD_MFE.CON_CHECK_MODEL2STATUS to DBREAD;

prompt
prompt Creating table CON_GROUP
prompt ========================
prompt
create table CMD_MFE.CON_GROUP
(
  id_group             NUMBER(16) not null,
  id_group_model_ver   NUMBER(16) not null,
  id_assistant         NUMBER(16) not null,
  status               VARCHAR2(50) not null,
  fulfilled            NUMBER(1) default 0 not null,
  mandatory            NUMBER(1),
  available_conditions NUMBER(2) default 0 not null
)
;
comment on table CMD_MFE.CON_GROUP
  is 'Skupina';
comment on column CMD_MFE.CON_GROUP.id_group
  is 'ID';
comment on column CMD_MFE.CON_GROUP.id_group_model_ver
  is 'ID verze vzoru skupiny';
comment on column CMD_MFE.CON_GROUP.id_assistant
  is 'ID asistenta';
comment on column CMD_MFE.CON_GROUP.status
  is 'Stav skupiny';
comment on column CMD_MFE.CON_GROUP.fulfilled
  is 'SplnÏn·/neplnÏn· skupina';
comment on column CMD_MFE.CON_GROUP.mandatory
  is 'Povinnost';
comment on column CMD_MFE.CON_GROUP.available_conditions
  is 'Pocet dostupnych podminek ve skupine';
create index CMD_MFE.IX_GROUP_ASSISTANT on CMD_MFE.CON_GROUP (ID_ASSISTANT);
create index CMD_MFE.IX_GROUP_MODEL_VER on CMD_MFE.CON_GROUP (ID_GROUP_MODEL_VER);
alter table CMD_MFE.CON_GROUP
  add constraint PK_GROUP_ID primary key (ID_GROUP);
alter table CMD_MFE.CON_GROUP
  add constraint FK_GROUP_ASSISTANT foreign key (ID_ASSISTANT)
  references CMD_MFE.CON_ASSISTANT (ID_ASSISTANT) on delete cascade;
alter table CMD_MFE.CON_GROUP
  add constraint CS_GROUP_AVAILABLE_CONDITIONS
  check (available_conditions >= 0);
alter table CMD_MFE.CON_GROUP
  add constraint CS_GROUP_FULFILLED
  check (fulfilled IN (0, 1));
alter table CMD_MFE.CON_GROUP
  add constraint CS_GROUP_MANDATORY
  check (mandatory IN (0, 1));
alter table CMD_MFE.CON_GROUP
  add constraint CS_GROUP_STATUS
  check (status IN (
            'IRRELEVANT',
            'NEW',
            'SAVED',
            'IGNORED'
        ));
grant select on CMD_MFE.CON_GROUP to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_GROUP to DBDEVELOP;
grant select on CMD_MFE.CON_GROUP to DBREAD;

prompt
prompt Creating table CON_COND
prompt =======================
prompt
create table CMD_MFE.CON_COND
(
  id_cond                 NUMBER(16) not null,
  id_cond_model_ver       NUMBER(16),
  id_group                NUMBER(16),
  id_prop                 NUMBER(16) not null,
  is_contractual          NUMBER(1) not null,
  status                  VARCHAR2(50) not null,
  revision_flag           VARCHAR2(50),
  id_revision_parent_cond NUMBER(16),
  comment_text            VARCHAR2(2000),
  coll                    VARCHAR2(256),
  tranche                 VARCHAR2(256),
  created_at              DATE default SYSDATE not null,
  created_by              CHAR(9) not null
)
;
comment on table CMD_MFE.CON_COND
  is 'Instance podmÌnek k n·vrhu';
comment on column CMD_MFE.CON_COND.id_cond
  is 'ID podmÌnky';
comment on column CMD_MFE.CON_COND.id_cond_model_ver
  is 'ID verze vzoru';
comment on column CMD_MFE.CON_COND.id_group
  is 'ID skupiny';
comment on column CMD_MFE.CON_COND.id_prop
  is 'ID navrhu';
comment on column CMD_MFE.CON_COND.is_contractual
  is 'P¯Ìznak, zda je podmÌnka smluvnÌ/nesmluvnÌ';
comment on column CMD_MFE.CON_COND.status
  is 'Stav podmÌnky';
comment on column CMD_MFE.CON_COND.revision_flag
  is 'ZmÏnov˝ p¯Ìznak (oznaËuje zmÏnu podmÌnky n·vrhu proti zmÏnovÈmu n·vrhu) - st·vajÌcÌ/nov·/smazan·/zmÏnÏn·';
comment on column CMD_MFE.CON_COND.id_revision_parent_cond
  is 'ID podmÌnky, ûe kterÈ vznikla revize novÈ podmÌnky';
comment on column CMD_MFE.CON_COND.comment_text
  is 'Koment·¯ podmÌnky';
comment on column CMD_MFE.CON_COND.coll
  is 'ZajiötÏnÌ - z·stava';
comment on column CMD_MFE.CON_COND.tranche
  is 'ZajiötÏnÌ - tranöe/limity';
comment on column CMD_MFE.CON_COND.created_at
  is 'Datum vytvo¯enÌ instance podmÌnky';
comment on column CMD_MFE.CON_COND.created_by
  is 'SSO uzivatele';
create index CMD_MFE.IX_CON_COND_REV_PARENT_COND on CMD_MFE.CON_COND (ID_REVISION_PARENT_COND);
create index CMD_MFE.IX_COND_GROUP on CMD_MFE.CON_COND (ID_GROUP);
create index CMD_MFE.IX_COND_MODEL on CMD_MFE.CON_COND (ID_COND_MODEL_VER);
create index CMD_MFE.IX_COND_PROP on CMD_MFE.CON_COND (ID_PROP);
alter table CMD_MFE.CON_COND
  add constraint PK_COND_ID primary key (ID_COND);
alter table CMD_MFE.CON_COND
  add constraint FK_CON_COND_REV_PARENT_COND foreign key (ID_REVISION_PARENT_COND)
  references CMD_MFE.CON_COND (ID_COND);
alter table CMD_MFE.CON_COND
  add constraint FK_COND_GROUP foreign key (ID_GROUP)
  references CMD_MFE.CON_GROUP (ID_GROUP);
alter table CMD_MFE.CON_COND
  add constraint FK_COND_MODEL foreign key (ID_COND_MODEL_VER)
  references CMD_MFE.CON_COND_MODEL_VER (ID_COND_MODEL_VER);
alter table CMD_MFE.CON_COND
  add constraint CS_CON_COND_REVISION_FLAG
  check (revision_flag IN (
            'UNCHANGED',
            'REMOVED_UNCHANGED',
            'CHANGED',
            'REMOVED_CHANGED',
            'ADDED'
        ));
alter table CMD_MFE.CON_COND
  add constraint CS_COND_CONSTRACTUAL
  check (is_contractual IN (0, 1));
alter table CMD_MFE.CON_COND
  add constraint CS_COND_STATUS
  check (status IN (
            'SAVED',
            'REMOVED',
            'IGNORED'
        ));
grant select on CMD_MFE.CON_COND to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_COND to DBDEVELOP;
grant select on CMD_MFE.CON_COND to DBREAD;

prompt
prompt Creating table CON_CLIENT_COND
prompt ==============================
prompt
create table CMD_MFE.CON_CLIENT_COND
(
  id_cond    NUMBER(16) not null,
  status     VARCHAR2(50) not null,
  created_at DATE not null
)
;
comment on table CMD_MFE.CON_CLIENT_COND
  is 'KlientskÈ podmÌnky';
comment on column CMD_MFE.CON_CLIENT_COND.id_cond
  is 'ID podmÌnky';
comment on column CMD_MFE.CON_CLIENT_COND.status
  is 'Stav';
comment on column CMD_MFE.CON_CLIENT_COND.created_at
  is 'Datum vytvo¯enÌ';
alter table CMD_MFE.CON_CLIENT_COND
  add constraint PK_CLIENT_COND primary key (ID_COND, STATUS);
alter table CMD_MFE.CON_CLIENT_COND
  add constraint FK_CLIENT_COND_COND foreign key (ID_COND)
  references CMD_MFE.CON_COND (ID_COND) on delete cascade;
alter table CMD_MFE.CON_CLIENT_COND
  add constraint CS_CLIENT_COND_STATUS
  check (status IN (
            'ACTIVE',
            'PRINTED',
            'APPROVED'
        ));
grant select on CMD_MFE.CON_CLIENT_COND to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_CLIENT_COND to DBDEVELOP;
grant select on CMD_MFE.CON_CLIENT_COND to DBREAD;

prompt
prompt Creating table CON_PROP_ATTR
prompt ============================
prompt
create table CMD_MFE.CON_PROP_ATTR
(
  id_prop_attr VARCHAR2(64) not null
)
;
comment on table CMD_MFE.CON_PROP_ATTR
  is 'Seznam atribut˘ n·vrhu';
comment on column CMD_MFE.CON_PROP_ATTR.id_prop_attr
  is 'ID/N·zev atributu';
alter table CMD_MFE.CON_PROP_ATTR
  add constraint PK_PROP_ATTR primary key (ID_PROP_ATTR);
grant select on CMD_MFE.CON_PROP_ATTR to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_PROP_ATTR to DBDEVELOP;
grant select on CMD_MFE.CON_PROP_ATTR to DBREAD;

prompt
prompt Creating table CON_EXPR_ELEMENT
prompt ===============================
prompt
create table CMD_MFE.CON_EXPR_ELEMENT
(
  id_expr_element NUMBER(16) not null,
  id_prop_attr    VARCHAR2(64) not null,
  operator        VARCHAR2(50) not null,
  value_title     VARCHAR2(64) not null,
  id_next         NUMBER(16),
  next_operator   VARCHAR2(50)
)
;
comment on table CMD_MFE.CON_EXPR_ELEMENT
  is 'Elementy v˝raz˘ pro kalkulaËky';
comment on column CMD_MFE.CON_EXPR_ELEMENT.id_expr_element
  is 'ID';
comment on column CMD_MFE.CON_EXPR_ELEMENT.id_prop_attr
  is 'ID/N·zev atributu';
comment on column CMD_MFE.CON_EXPR_ELEMENT.operator
  is 'oper·tor (EQUAL rovn· se, NOT_EQUAL nerovn· se)';
comment on column CMD_MFE.CON_EXPR_ELEMENT.value_title
  is 'symbolick˝ (z·stupn˝) n·zev hodnoty';
comment on column CMD_MFE.CON_EXPR_ELEMENT.id_next
  is 'ID n·sledujÌcÌho elementu, pokud jde o kombinaci vÌce element˘, jinak null';
comment on column CMD_MFE.CON_EXPR_ELEMENT.next_operator
  is 'oper·tor (AND/OR) kter˝ je pouûit p¯i vyhodnocov·nÌ element˘, pokud jich je vÌc neû jeden';
create index CMD_MFE.IX_EXPR_ELEMENT_NEXT on CMD_MFE.CON_EXPR_ELEMENT (ID_NEXT);
create index CMD_MFE.IX_EXPR_ELEMENT_PROP_ATTR on CMD_MFE.CON_EXPR_ELEMENT (ID_PROP_ATTR);
alter table CMD_MFE.CON_EXPR_ELEMENT
  add constraint PK_EXPR_ELEMENT_ID primary key (ID_EXPR_ELEMENT);
alter table CMD_MFE.CON_EXPR_ELEMENT
  add constraint FK_EXPR_ELEMENT_NEXT foreign key (ID_NEXT)
  references CMD_MFE.CON_EXPR_ELEMENT (ID_EXPR_ELEMENT);
alter table CMD_MFE.CON_EXPR_ELEMENT
  add constraint FK_EXPR_ELEMENT_PROP_ATTR foreign key (ID_PROP_ATTR)
  references CMD_MFE.CON_PROP_ATTR (ID_PROP_ATTR);
alter table CMD_MFE.CON_EXPR_ELEMENT
  add constraint CS_EXPR_ELEMENT_NEXT_OPERATOR
  check (next_operator IN (
            'AND',
            'OR'
        ));
alter table CMD_MFE.CON_EXPR_ELEMENT
  add constraint CS_EXPR_ELEMENT_OPERATOR
  check (operator IN (
            'EQUAL',
            'NOT_EQUAL'
        ));
grant select, insert on CMD_MFE.CON_EXPR_ELEMENT to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_EXPR_ELEMENT to DBDEVELOP;
grant select on CMD_MFE.CON_EXPR_ELEMENT to DBREAD;

prompt
prompt Creating table CON_EXPR
prompt =======================
prompt
create table CMD_MFE.CON_EXPR
(
  id_expr         NUMBER(16) not null,
  id_expr_element NUMBER(16) not null,
  description     VARCHAR2(2000)
)
;
comment on table CMD_MFE.CON_EXPR
  is 'V˝razy pro kalkulaËky';
comment on column CMD_MFE.CON_EXPR.id_expr
  is 'ID';
comment on column CMD_MFE.CON_EXPR.id_expr_element
  is 'ID elementu';
comment on column CMD_MFE.CON_EXPR.description
  is 'Popis';
create index CMD_MFE.IX_EXPR_EXPR_ELEMENT on CMD_MFE.CON_EXPR (ID_EXPR_ELEMENT);
alter table CMD_MFE.CON_EXPR
  add constraint PK_EXPR_ID primary key (ID_EXPR);
alter table CMD_MFE.CON_EXPR
  add constraint FK_EXPR_EXPR_ELEMENT foreign key (ID_EXPR_ELEMENT)
  references CMD_MFE.CON_EXPR_ELEMENT (ID_EXPR_ELEMENT);
grant select, insert on CMD_MFE.CON_EXPR to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_EXPR to DBDEVELOP;
grant select on CMD_MFE.CON_EXPR to DBREAD;

prompt
prompt Creating table CON_GROUP_MODEL
prompt ==============================
prompt
create table CMD_MFE.CON_GROUP_MODEL
(
  id_group_model NUMBER(16) not null,
  id_current_ver NUMBER(16) not null,
  title          VARCHAR2(256) not null,
  id_expr        NUMBER(16),
  user_order     INTEGER,
  old_group_id   INTEGER
)
;
comment on table CMD_MFE.CON_GROUP_MODEL
  is 'Vzor skupiny';
comment on column CMD_MFE.CON_GROUP_MODEL.id_group_model
  is 'ID';
comment on column CMD_MFE.CON_GROUP_MODEL.id_current_ver
  is 'ID aktu·lnÌ verze';
comment on column CMD_MFE.CON_GROUP_MODEL.title
  is 'N·zev';
comment on column CMD_MFE.CON_GROUP_MODEL.id_expr
  is 'ID v˝razu pro splnÏnost skupiny';
comment on column CMD_MFE.CON_GROUP_MODEL.user_order
  is 'UûivatelskÈ po¯adÌ';
comment on column CMD_MFE.CON_GROUP_MODEL.old_group_id
  is 'StarÈ ID';
create index CMD_MFE.IX_GROUP_MODEL_CURRENT_VER on CMD_MFE.CON_GROUP_MODEL (ID_CURRENT_VER);
create index CMD_MFE.IX_GROUP_MODEL_EXPR on CMD_MFE.CON_GROUP_MODEL (ID_EXPR);
alter table CMD_MFE.CON_GROUP_MODEL
  add constraint PK_GROUP_MODEL_ID primary key (ID_GROUP_MODEL);
alter table CMD_MFE.CON_GROUP_MODEL
  add constraint FK_GROUP_MODEL_CURRENT_VER foreign key (ID_CURRENT_VER)
  references CMD_MFE.CON_GROUP_MODEL_VER (ID_GROUP_MODEL_VER)
  deferrable initially deferred;
alter table CMD_MFE.CON_GROUP_MODEL
  add constraint FK_GROUP_MODEL_EXPR foreign key (ID_EXPR)
  references CMD_MFE.CON_EXPR (ID_EXPR);
grant select, insert, update, delete on CMD_MFE.CON_GROUP_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_GROUP_MODEL to DBDEVELOP;
grant select on CMD_MFE.CON_GROUP_MODEL to DBREAD;

prompt
prompt Creating table CON_GROUP_MODEL_VER
prompt ==================================
prompt
create table CMD_MFE.CON_GROUP_MODEL_VER
(
  id_group_model_ver NUMBER(16) not null,
  id_group_model     NUMBER(16) not null,
  mandatory          VARCHAR2(50) not null,
  selectivity        VARCHAR2(50)
)
;
comment on table CMD_MFE.CON_GROUP_MODEL_VER
  is 'Verze vzoru skupiny';
comment on column CMD_MFE.CON_GROUP_MODEL_VER.id_group_model_ver
  is 'ID';
comment on column CMD_MFE.CON_GROUP_MODEL_VER.id_group_model
  is 'ID vzoru skupiny';
comment on column CMD_MFE.CON_GROUP_MODEL_VER.mandatory
  is 'Povinnost';
comment on column CMD_MFE.CON_GROUP_MODEL_VER.selectivity
  is 'Volitelnost';
create index CMD_MFE.IX_CON_GROUP_MODEL_VER_BASE on CMD_MFE.CON_GROUP_MODEL_VER (ID_GROUP_MODEL);
alter table CMD_MFE.CON_GROUP_MODEL_VER
  add constraint PK_GROUP_MODEL_VER_ID primary key (ID_GROUP_MODEL_VER);
alter table CMD_MFE.CON_GROUP_MODEL_VER
  add constraint FK_CON_GROUP_MODEL_VER_BASE foreign key (ID_GROUP_MODEL)
  references CMD_MFE.CON_GROUP_MODEL (ID_GROUP_MODEL) on delete cascade;
alter table CMD_MFE.CON_GROUP_MODEL_VER
  add constraint CS_GROUP_MODEL_VER_MANDATORY
  check (mandatory IN (
            'REQUIRED',
            'OPTIONAL',
            'DYNAMIC'
        ));
alter table CMD_MFE.CON_GROUP_MODEL_VER
  add constraint CS_GROUP_MODEL_VER_SEL
  check (selectivity IN (
            'ONE',
            'ALL',
            'ONE_OR_MORE'
        ));
grant select, insert, update, delete on CMD_MFE.CON_GROUP_MODEL_VER to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_GROUP_MODEL_VER to DBDEVELOP;
grant select on CMD_MFE.CON_GROUP_MODEL_VER to DBREAD;

prompt
prompt Creating table CON_CM2GMV
prompt =========================
prompt
create table CMD_MFE.CON_CM2GMV
(
  id_cond_model      NUMBER(16) not null,
  id_group_model_ver NUMBER(16) not null,
  id_expr            NUMBER(16),
  default_cond       CHAR(1) default '0' not null
)
;
comment on table CMD_MFE.CON_CM2GMV
  is 'Vazebni tabulka mezi verzi vzoru skupiny a vzorem podminky';
comment on column CMD_MFE.CON_CM2GMV.id_cond_model
  is 'ID vzoru podminky';
comment on column CMD_MFE.CON_CM2GMV.id_group_model_ver
  is 'ID verze vzoru skupiny';
comment on column CMD_MFE.CON_CM2GMV.id_expr
  is 'ID vyrazu';
comment on column CMD_MFE.CON_CM2GMV.default_cond
  is 'DefaultnÌ podmÌnka';
create index CMD_MFE.IX_CM2GMV_EXPR on CMD_MFE.CON_CM2GMV (ID_EXPR);
alter table CMD_MFE.CON_CM2GMV
  add constraint PK_CM2GMV_ID primary key (ID_COND_MODEL, ID_GROUP_MODEL_VER);
alter table CMD_MFE.CON_CM2GMV
  add constraint FK_CM2GMV_COND_MODEL foreign key (ID_COND_MODEL)
  references CMD_MFE.CON_COND_MODEL (ID_COND_MODEL) on delete cascade;
alter table CMD_MFE.CON_CM2GMV
  add constraint FK_CM2GMV_EXPR foreign key (ID_EXPR)
  references CMD_MFE.CON_EXPR (ID_EXPR);
alter table CMD_MFE.CON_CM2GMV
  add constraint FK_CM2GMV_GROUP_MODEL_VER foreign key (ID_GROUP_MODEL_VER)
  references CMD_MFE.CON_GROUP_MODEL_VER (ID_GROUP_MODEL_VER) on delete cascade;
alter table CMD_MFE.CON_CM2GMV
  add constraint CS_CM2GMV_DEFAULT_COND
  check (DEFAULT_COND IN ('0','1'));
grant select, insert, update, delete on CMD_MFE.CON_CM2GMV to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_CM2GMV to DBDEVELOP;
grant select on CMD_MFE.CON_CM2GMV to DBREAD;

prompt
prompt Creating table CON_COND_MODEL_VER_STATUS
prompt ========================================
prompt
create table CMD_MFE.CON_COND_MODEL_VER_STATUS
(
  id_cond_model_ver INTEGER not null,
  enviroment        VARCHAR2(15) not null,
  status            VARCHAR2(15),
  created_at        DATE,
  created_by        VARCHAR2(10),
  updated_at        DATE,
  updated_by        VARCHAR2(10)
)
;
alter table CMD_MFE.CON_COND_MODEL_VER_STATUS
  add constraint PK_COND_MODEL_VER_STATUS primary key (ID_COND_MODEL_VER, ENVIROMENT);
alter table CMD_MFE.CON_COND_MODEL_VER_STATUS
  add constraint FK_CON_VER_STATUS2COND foreign key (ID_COND_MODEL_VER)
  references CMD_MFE.CON_COND_MODEL_VER (ID_COND_MODEL_VER) on delete cascade;
alter table CMD_MFE.CON_COND_MODEL_VER_STATUS
  add constraint CS_COND_VER_ENV
  check (ENVIROMENT in ('MFE','TST','LIVE'));
alter table CMD_MFE.CON_COND_MODEL_VER_STATUS
  add constraint CS_COND_VER_STATUS
  check (STATUS in ('VALID','EDITED','INVALID','N_A'));
grant select, insert, update, delete on CMD_MFE.CON_COND_MODEL_VER_STATUS to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_COND_MODEL_VER_STATUS to DBDEVELOP;
grant select on CMD_MFE.CON_COND_MODEL_VER_STATUS to DBREAD;

prompt
prompt Creating table CON_COND_MODEL2BB_GROUP
prompt ======================================
prompt
create table CMD_MFE.CON_COND_MODEL2BB_GROUP
(
  id_bb_group       NUMBER(16) not null,
  id_cond_model     NUMBER(16) not null,
  priority          NUMBER(2) default 0 not null,
  equivalence_batch VARCHAR2(16)
)
;
alter table CMD_MFE.CON_COND_MODEL2BB_GROUP
  add constraint FK_C_M2BB_G_BB_GROUP foreign key (ID_BB_GROUP)
  references CMD_MFE.CON_BB_GROUP (ID_BB_GROUP) on delete cascade;
alter table CMD_MFE.CON_COND_MODEL2BB_GROUP
  add constraint FK_C_M2BB_G_COND_MODEL foreign key (ID_COND_MODEL)
  references CMD_MFE.CON_COND_MODEL (ID_COND_MODEL) on delete cascade;
alter table CMD_MFE.CON_COND_MODEL2BB_GROUP
  add constraint CS_C_M2BB_G_PRIORITY
  check (priority BETWEEN 0 AND 90);
grant select on CMD_MFE.CON_COND_MODEL2BB_GROUP to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_COND_MODEL2BB_GROUP to DBDEVELOP;
grant select on CMD_MFE.CON_COND_MODEL2BB_GROUP to DBREAD;

prompt
prompt Creating table CON_COND_PROPS2DOC_TYPE
prompt ======================================
prompt
create table CMD_MFE.CON_COND_PROPS2DOC_TYPE
(
  id_cond_props NUMBER(16) not null,
  id_doc_type   NUMBER(16) not null
)
;
comment on table CMD_MFE.CON_COND_PROPS2DOC_TYPE
  is 'Vazba podminky na typ dokumentu';
comment on column CMD_MFE.CON_COND_PROPS2DOC_TYPE.id_cond_props
  is 'ID podminky';
comment on column CMD_MFE.CON_COND_PROPS2DOC_TYPE.id_doc_type
  is 'ID typu dokumentu';
alter table CMD_MFE.CON_COND_PROPS2DOC_TYPE
  add constraint PK_CON_COND_PROPS2DOC_TYPE primary key (ID_COND_PROPS, ID_DOC_TYPE);
alter table CMD_MFE.CON_COND_PROPS2DOC_TYPE
  add constraint FK_CON_COND_PROPS2DOC_TYPE_CON foreign key (ID_COND_PROPS)
  references CMD_MFE.CON_COND_PROPS (ID_COND_PROPS) on delete cascade;
alter table CMD_MFE.CON_COND_PROPS2DOC_TYPE
  add constraint FK_CON_COND_PROPS2DOC_TYPE_CO1 foreign key (ID_DOC_TYPE)
  references CMD_MFE.CON_DOC_TYPE (ID);
grant select, insert, update, delete on CMD_MFE.CON_COND_PROPS2DOC_TYPE to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_COND_PROPS2DOC_TYPE to DBDEVELOP;
grant select on CMD_MFE.CON_COND_PROPS2DOC_TYPE to DBREAD;

prompt
prompt Creating table CON_COV_MODEL
prompt ============================
prompt
create table CMD_MFE.CON_COV_MODEL
(
  id_cond_model         INTEGER not null,
  monitoring_status     VARCHAR2(50) not null,
  monitoring_start_unit VARCHAR2(50),
  monitoring_start_cnt  INTEGER
)
;
comment on table CMD_MFE.CON_COV_MODEL
  is 'Vzor podmÌnky - specifickÈ vlastnosti kovenant';
comment on column CMD_MFE.CON_COV_MODEL.id_cond_model
  is 'ID vzoru podmÌnky';
comment on column CMD_MFE.CON_COV_MODEL.monitoring_status
  is 'Stav monitoringu kovenanty';
comment on column CMD_MFE.CON_COV_MODEL.monitoring_start_unit
  is 'Start v˝poËtu - jednotky';
comment on column CMD_MFE.CON_COV_MODEL.monitoring_start_cnt
  is 'Start v˝poËtu - poËet jednotek';
alter table CMD_MFE.CON_COV_MODEL
  add constraint PK_CON_COV_MODEL primary key (ID_COND_MODEL);
alter table CMD_MFE.CON_COV_MODEL
  add constraint FK_CON_COV_MOD_ID_COND_MODEL foreign key (ID_COND_MODEL)
  references CMD_MFE.CON_COND_MODEL (ID_COND_MODEL) on delete cascade;
alter table CMD_MFE.CON_COV_MODEL
  add constraint CS_CON_COV_MON_STAT
  check (monitoring_status IN (
            'MONITORED',
            'NOT_MONITORED'
    ));
grant select, insert, update, delete on CMD_MFE.CON_COV_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_COV_MODEL to DBDEVELOP;
grant select on CMD_MFE.CON_COV_MODEL to DBREAD;

prompt
prompt Creating table CON_CUSTOM_COND
prompt ==============================
prompt
create table CMD_MFE.CON_CUSTOM_COND
(
  id_cond       NUMBER(16) not null,
  auth_status   VARCHAR2(50) not null,
  auth_user     CHAR(9),
  auth_date     DATE,
  auth_comment  VARCHAR2(2000),
  value         VARCHAR2(2000) not null,
  id_cond_props NUMBER(16) not null
)
;
comment on table CMD_MFE.CON_CUSTOM_COND
  is 'Vlastni podminka';
comment on column CMD_MFE.CON_CUSTOM_COND.id_cond
  is 'ID';
comment on column CMD_MFE.CON_CUSTOM_COND.auth_status
  is 'Stav autorizace';
comment on column CMD_MFE.CON_CUSTOM_COND.auth_user
  is 'SSO autorizujÌcÌho uûivatele';
comment on column CMD_MFE.CON_CUSTOM_COND.auth_date
  is 'Datum autorizace';
comment on column CMD_MFE.CON_CUSTOM_COND.auth_comment
  is 'Koment·¯ autorizace';
comment on column CMD_MFE.CON_CUSTOM_COND.value
  is 'Hodnota (Textace)';
comment on column CMD_MFE.CON_CUSTOM_COND.id_cond_props
  is 'Provazani na ID vlastnosti podminky';
create index CMD_MFE.IX_CUSTOM_COND_COND_PROPS on CMD_MFE.CON_CUSTOM_COND (ID_COND_PROPS);
alter table CMD_MFE.CON_CUSTOM_COND
  add constraint PK_CUSTOM_COND_ID primary key (ID_COND);
alter table CMD_MFE.CON_CUSTOM_COND
  add constraint FK_CUSTOM_COND_COND foreign key (ID_COND)
  references CMD_MFE.CON_COND (ID_COND) on delete cascade;
alter table CMD_MFE.CON_CUSTOM_COND
  add constraint FK_CUSTOM_COND_COND_PROPS foreign key (ID_COND_PROPS)
  references CMD_MFE.CON_COND_PROPS (ID_COND_PROPS);
alter table CMD_MFE.CON_CUSTOM_COND
  add constraint CS_CUST_COND_AUTH_STATUS
  check (auth_status IN (
            'AUTHORIZED',
            'UNAUTHORIZED',
            'NO_VERDICT',
            'NO_NEED'
        ));
grant select on CMD_MFE.CON_CUSTOM_COND to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_CUSTOM_COND to DBDEVELOP;
grant select on CMD_MFE.CON_CUSTOM_COND to DBREAD;

prompt
prompt Creating table CON_DOC_TYPE_CATEGORY_TMP2
prompt =========================================
prompt
create table CMD_MFE.CON_DOC_TYPE_CATEGORY_TMP2
(
  id_category NUMBER not null,
  title       VARCHAR2(50)
)
;
grant select on CMD_MFE.CON_DOC_TYPE_CATEGORY_TMP2 to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_DOC_TYPE_CATEGORY_TMP2 to DBDEVELOP;
grant select on CMD_MFE.CON_DOC_TYPE_CATEGORY_TMP2 to DBREAD;

prompt
prompt Creating table CON_DOC_TYPE_ENV
prompt ===============================
prompt
create table CMD_MFE.CON_DOC_TYPE_ENV
(
  id_doc_type  INTEGER not null,
  db_link      VARCHAR2(100) not null,
  env_user     VARCHAR2(100) not null,
  environment  VARCHAR2(100) not null,
  published_by INTEGER not null
)
;
grant select on CMD_MFE.CON_DOC_TYPE_ENV to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_DOC_TYPE_ENV to DBDEVELOP;
grant select on CMD_MFE.CON_DOC_TYPE_ENV to DBREAD;

prompt
prompt Creating table CON_DOC_TYPE_STATUS
prompt ==================================
prompt
create table CMD_MFE.CON_DOC_TYPE_STATUS
(
  id_doc_type INTEGER not null,
  environment VARCHAR2(15) not null,
  status      VARCHAR2(15) not null,
  created_at  DATE default SYSDATE not null,
  created_by  INTEGER not null,
  updated_at  DATE default SYSDATE not null,
  updated_by  INTEGER not null
)
;
comment on table CMD_MFE.CON_DOC_TYPE_STATUS
  is 'Stav publikace typu dokumentu';
comment on column CMD_MFE.CON_DOC_TYPE_STATUS.id_doc_type
  is 'Id typu dokumentu';
comment on column CMD_MFE.CON_DOC_TYPE_STATUS.environment
  is 'Prost≈ôed√≠';
comment on column CMD_MFE.CON_DOC_TYPE_STATUS.status
  is 'Stav publikace';
comment on column CMD_MFE.CON_DOC_TYPE_STATUS.created_at
  is 'Vytvo≈ôeno';
comment on column CMD_MFE.CON_DOC_TYPE_STATUS.created_by
  is 'Autor';
comment on column CMD_MFE.CON_DOC_TYPE_STATUS.updated_at
  is 'Upraveno';
comment on column CMD_MFE.CON_DOC_TYPE_STATUS.updated_by
  is 'Editor';
alter table CMD_MFE.CON_DOC_TYPE_STATUS
  add constraint PK_DOC_TYPE_STATUS primary key (ID_DOC_TYPE, ENVIRONMENT);
alter table CMD_MFE.CON_DOC_TYPE_STATUS
  add constraint FK_DOC_TYPE_STATUS_CREATED_BY foreign key (CREATED_BY)
  references CMD_MFE.MFE_USER (USR_ID);
alter table CMD_MFE.CON_DOC_TYPE_STATUS
  add constraint FK_DOC_TYPE_STATUS_ID_DOC_TYPE foreign key (ID_DOC_TYPE)
  references CMD_MFE.CON_DOC_TYPE (ID);
alter table CMD_MFE.CON_DOC_TYPE_STATUS
  add constraint FK_DOC_TYPE_STATUS_UPDATED_BY foreign key (UPDATED_BY)
  references CMD_MFE.MFE_USER (USR_ID);
grant select, insert, update, delete on CMD_MFE.CON_DOC_TYPE_STATUS to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_DOC_TYPE_STATUS to DBDEVELOP;
grant select on CMD_MFE.CON_DOC_TYPE_STATUS to DBREAD;

prompt
prompt Creating table CON_EXPR_EL_VALUES
prompt =================================
prompt
create table CMD_MFE.CON_EXPR_EL_VALUES
(
  id_prop_attr  VARCHAR2(64) not null,
  operator      VARCHAR2(50) not null,
  value_title   VARCHAR2(64) not null,
  values_clause VARCHAR2(2000) not null
)
;
comment on table CMD_MFE.CON_EXPR_EL_VALUES
  is 'Tabulka s mapov·nÌm atribut˘ n·vrhu na konkrÈtnÌ hodnoty z n·vrhu';
comment on column CMD_MFE.CON_EXPR_EL_VALUES.id_prop_attr
  is 'ID/N·zev atributu';
comment on column CMD_MFE.CON_EXPR_EL_VALUES.operator
  is 'oper·tor (EQUAL rovn· se, NOT_EQUAL nerovn· se)';
comment on column CMD_MFE.CON_EXPR_EL_VALUES.value_title
  is 'symbolick˝ (z·stupn˝) n·zev hodnoty';
comment on column CMD_MFE.CON_EXPR_EL_VALUES.values_clause
  is 'klauzule pouûit· pro naËtenÌ hodnot';
alter table CMD_MFE.CON_EXPR_EL_VALUES
  add constraint PK_CON_EXPR_EL_VALUES primary key (ID_PROP_ATTR, OPERATOR, VALUE_TITLE);
alter table CMD_MFE.CON_EXPR_EL_VALUES
  add constraint FK_EXPR_EL_VALUES_PROP_ATTR foreign key (ID_PROP_ATTR)
  references CMD_MFE.CON_PROP_ATTR (ID_PROP_ATTR);
alter table CMD_MFE.CON_EXPR_EL_VALUES
  add constraint CS_EXPR_EL_VALUES_OPERATOR
  check (operator IN (
            'EQUAL',
            'NOT_EQUAL'
        ));
grant select on CMD_MFE.CON_EXPR_EL_VALUES to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_EXPR_EL_VALUES to DBDEVELOP;
grant select on CMD_MFE.CON_EXPR_EL_VALUES to DBREAD;

prompt
prompt Creating table CON_FORB_COMB_CONDS
prompt ==================================
prompt
create table CMD_MFE.CON_FORB_COMB_CONDS
(
  cond_code1 VARCHAR2(7) not null,
  cond_code2 VARCHAR2(7) not null
)
;
comment on column CMD_MFE.CON_FORB_COMB_CONDS.cond_code1
  is 'reg. ËÌslo podmÌnky 1 (mazajÌcÌ)';
comment on column CMD_MFE.CON_FORB_COMB_CONDS.cond_code2
  is 'reg. ËÌslo podmÌnky 2 (eliminovanÈ)';
alter table CMD_MFE.CON_FORB_COMB_CONDS
  add constraint PK_FORB_CONDS primary key (COND_CODE1, COND_CODE2);
alter table CMD_MFE.CON_FORB_COMB_CONDS
  add constraint FK_FORB_CONDS1_2COND_PROP foreign key (COND_CODE1)
  references CMD_MFE.CON_COND_PROPS (CODE) on delete cascade;
alter table CMD_MFE.CON_FORB_COMB_CONDS
  add constraint FK_FORB_CONDS2_2COND_PROP foreign key (COND_CODE2)
  references CMD_MFE.CON_COND_PROPS (CODE) on delete cascade;
grant select, insert, update, delete on CMD_MFE.CON_FORB_COMB_CONDS to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_FORB_COMB_CONDS to DBDEVELOP;
grant select on CMD_MFE.CON_FORB_COMB_CONDS to DBREAD;

prompt
prompt Creating table CON_VARIABLE
prompt ===========================
prompt
create table CMD_MFE.CON_VARIABLE
(
  id_variable NUMBER(16) not null,
  title       VARCHAR2(64) not null,
  kind        VARCHAR2(50) not null,
  query       VARCHAR2(512)
)
;
comment on table CMD_MFE.CON_VARIABLE
  is 'Tabulka pro systÈmovÈ hodnoty pro fragmenty';
comment on column CMD_MFE.CON_VARIABLE.id_variable
  is 'ID';
comment on column CMD_MFE.CON_VARIABLE.title
  is 'Nazev';
comment on column CMD_MFE.CON_VARIABLE.kind
  is 'Typ systÈmovÈ hodnoty';
comment on column CMD_MFE.CON_VARIABLE.query
  is 'KÛd dotazu na systÈmovou hodnotu';
alter table CMD_MFE.CON_VARIABLE
  add constraint PK_VARIABLE_ID primary key (ID_VARIABLE);
alter table CMD_MFE.CON_VARIABLE
  add constraint CS_VARIABLE_TITLE unique (TITLE);
alter table CMD_MFE.CON_VARIABLE
  add constraint CS_VARIABLE_KIND
  check (kind IN (
            'HARDCODED',
            'SOFTCODED'
        ));
grant select on CMD_MFE.CON_VARIABLE to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_VARIABLE to DBDEVELOP;
grant select on CMD_MFE.CON_VARIABLE to DBREAD;

prompt
prompt Creating table CON_FRAGMENT_MODEL
prompt =================================
prompt
create table CMD_MFE.CON_FRAGMENT_MODEL
(
  id_fragment_model NUMBER(16) not null,
  id_cond_model_ver NUMBER(16) not null,
  id_prev           NUMBER(16),
  placeholder       VARCHAR2(128),
  description       VARCHAR2(512),
  kind              VARCHAR2(50) not null,
  value             VARCHAR2(2000),
  id_variable       NUMBER(16),
  mandatory         NUMBER(1),
  migration_frag_id NUMBER(16),
  value_type        VARCHAR2(50) default 'STRING' not null
)
;
comment on table CMD_MFE.CON_FRAGMENT_MODEL
  is 'Vzor fragmentu podmÌnky';
comment on column CMD_MFE.CON_FRAGMENT_MODEL.id_fragment_model
  is 'ID';
comment on column CMD_MFE.CON_FRAGMENT_MODEL.id_cond_model_ver
  is 'ID verze modelu podminky';
comment on column CMD_MFE.CON_FRAGMENT_MODEL.id_prev
  is 'ID predchoziho fragmentu';
comment on column CMD_MFE.CON_FRAGMENT_MODEL.placeholder
  is 'N·zev fragmentu (hodnota zobrazovan· v textaci podmÌnky, kter· je pak zamÏnÏna za konkretnÌ uûivatelky zadanou hodnotu)';
comment on column CMD_MFE.CON_FRAGMENT_MODEL.description
  is 'Popis';
comment on column CMD_MFE.CON_FRAGMENT_MODEL.kind
  is 'Typ fragmentu - volna promÏnn·/systÈmov· promÏnn·/termÌn plnÏnÌ';
comment on column CMD_MFE.CON_FRAGMENT_MODEL.value
  is 'Hodnota fragmentu typu pevny text / voln· promÏnn·';
comment on column CMD_MFE.CON_FRAGMENT_MODEL.id_variable
  is 'ID promenne';
comment on column CMD_MFE.CON_FRAGMENT_MODEL.mandatory
  is '1 povinny, 0 nepovinny fragment';
comment on column CMD_MFE.CON_FRAGMENT_MODEL.migration_frag_id
  is 'pouzito k migraci';
comment on column CMD_MFE.CON_FRAGMENT_MODEL.value_type
  is 'Urcuje jakeho typu muze nabyvat hodnota fragmentu';
create index CMD_MFE.IX_FRAGMENT_MODEL_VARIABLE on CMD_MFE.CON_FRAGMENT_MODEL (ID_VARIABLE);
create index CMD_MFE.IX_FRAG_MOD_COND_MODEL_VER on CMD_MFE.CON_FRAGMENT_MODEL (ID_COND_MODEL_VER);
create index CMD_MFE.IX_FRAG_MOD_PREV on CMD_MFE.CON_FRAGMENT_MODEL (ID_PREV);
alter table CMD_MFE.CON_FRAGMENT_MODEL
  add constraint PK_FRAGMENT_MODEL_ID primary key (ID_FRAGMENT_MODEL);
alter table CMD_MFE.CON_FRAGMENT_MODEL
  add constraint FK_FRAGMENT_MODEL_VARIABLE foreign key (ID_VARIABLE)
  references CMD_MFE.CON_VARIABLE (ID_VARIABLE);
alter table CMD_MFE.CON_FRAGMENT_MODEL
  add constraint FK_FRAG_MOD_COND_MODEL_VER foreign key (ID_COND_MODEL_VER)
  references CMD_MFE.CON_COND_MODEL_VER (ID_COND_MODEL_VER) on delete cascade;
alter table CMD_MFE.CON_FRAGMENT_MODEL
  add constraint FK_FRAG_MOD_PREV foreign key (ID_PREV)
  references CMD_MFE.CON_FRAGMENT_MODEL (ID_FRAGMENT_MODEL);
alter table CMD_MFE.CON_FRAGMENT_MODEL
  add constraint CS_FRAGMENT_MODEL_KIND
  check (kind IN (
            'STATIC',
            'USER',
            'SYSTEM',
        'INDICATOR'));
alter table CMD_MFE.CON_FRAGMENT_MODEL
  add constraint CS_FRAGMENT_VALUE_TYPE
  check (VALUE_TYPE IN ('NUMBER', 'PERCENT', 'DAY_COUNT', 'DATE', 'BANK_ACC', 'BANK_ACC_BANK_CODE', 'CURRENCY', 'STRING'));
alter table CMD_MFE.CON_FRAGMENT_MODEL
  add constraint CS_FRAGMENT_VALUE_TYPE_KIND
  check (KIND = 'USER' OR VALUE_TYPE = 'STRING' OR (KIND = 'INDICATOR' AND VALUE_TYPE = 'NUMBER'));
grant select, insert, update, delete on CMD_MFE.CON_FRAGMENT_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_FRAGMENT_MODEL to DBDEVELOP;
grant select on CMD_MFE.CON_FRAGMENT_MODEL to DBREAD;

prompt
prompt Creating table CON_FRAGMENT
prompt ===========================
prompt
create table CMD_MFE.CON_FRAGMENT
(
  id_fragment       NUMBER(16) not null,
  id_fragment_model NUMBER(16) not null,
  id_cond           NUMBER(16) not null,
  value             VARCHAR2(2000)
)
;
comment on table CMD_MFE.CON_FRAGMENT
  is 'Instance fragmentu podmÌnky';
comment on column CMD_MFE.CON_FRAGMENT.id_fragment
  is 'ID';
comment on column CMD_MFE.CON_FRAGMENT.id_fragment_model
  is 'ID modelu fragmentu';
comment on column CMD_MFE.CON_FRAGMENT.id_cond
  is 'ID podminky';
comment on column CMD_MFE.CON_FRAGMENT.value
  is 'Hodnota';
create index CMD_MFE.IX_FRAGMENT_COND on CMD_MFE.CON_FRAGMENT (ID_COND);
create index CMD_MFE.IX_FRAGMENT_MODEL on CMD_MFE.CON_FRAGMENT (ID_FRAGMENT_MODEL);
alter table CMD_MFE.CON_FRAGMENT
  add constraint PK_FRAGMENT_ID primary key (ID_FRAGMENT);
alter table CMD_MFE.CON_FRAGMENT
  add constraint FK_FRAGMENT_COND foreign key (ID_COND)
  references CMD_MFE.CON_COND (ID_COND);
alter table CMD_MFE.CON_FRAGMENT
  add constraint FK_FRAGMENT_MODEL foreign key (ID_FRAGMENT_MODEL)
  references CMD_MFE.CON_FRAGMENT_MODEL (ID_FRAGMENT_MODEL);
grant select on CMD_MFE.CON_FRAGMENT to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_FRAGMENT to DBDEVELOP;
grant select on CMD_MFE.CON_FRAGMENT to DBREAD;

prompt
prompt Creating table CON_INDICATOR_ABBREV
prompt ===================================
prompt
create table CMD_MFE.CON_INDICATOR_ABBREV
(
  indicator_abbrev  VARCHAR2(50) not null,
  indcator_activity INTEGER default 1 not null
)
;
comment on table CMD_MFE.CON_INDICATOR_ABBREV
  is 'seznam moznych indikatoru';
comment on column CMD_MFE.CON_INDICATOR_ABBREV.indicator_abbrev
  is 'indikator';
alter table CMD_MFE.CON_INDICATOR_ABBREV
  add constraint PK_CON_INDICATOR_ABBREV primary key (INDICATOR_ABBREV);
grant select on CMD_MFE.CON_INDICATOR_ABBREV to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_INDICATOR_ABBREV to DBDEVELOP;
grant select on CMD_MFE.CON_INDICATOR_ABBREV to DBREAD;

prompt
prompt Creating table CON_FRAGMENT_MODEL_COV
prompt =====================================
prompt
create table CMD_MFE.CON_FRAGMENT_MODEL_COV
(
  id_fragment_model INTEGER not null,
  indicator_abbrev  VARCHAR2(50) not null,
  operator          VARCHAR2(2) not null
)
;
comment on table CMD_MFE.CON_FRAGMENT_MODEL_COV
  is 'Vzor fragmentu textace podmÌnky - specifickÈ vlastnosti fragmentu p¯edstavujÌcÌho poûadovanou hodnotu indik·toru.';
comment on column CMD_MFE.CON_FRAGMENT_MODEL_COV.id_fragment_model
  is 'ID fragmentu textace podmÌnky - kovenanty';
comment on column CMD_MFE.CON_FRAGMENT_MODEL_COV.indicator_abbrev
  is 'Zkratka indik·toru';
comment on column CMD_MFE.CON_FRAGMENT_MODEL_COV.operator
  is 'Oper·tor pro porovn·nÌ poûadovan˝ a realizovanÈ hodnoty indik·toru - vyuûito pro kovenanty';
alter table CMD_MFE.CON_FRAGMENT_MODEL_COV
  add constraint PK_CON_FRAGMENT_MODEL_COV primary key (ID_FRAGMENT_MODEL);
alter table CMD_MFE.CON_FRAGMENT_MODEL_COV
  add constraint FK_C_FR_M_C_CON_IND_ABBR foreign key (INDICATOR_ABBREV)
  references CMD_MFE.CON_INDICATOR_ABBREV (INDICATOR_ABBREV);
alter table CMD_MFE.CON_FRAGMENT_MODEL_COV
  add constraint FK_CON_FR_MO_CO_ID_FR_MOD foreign key (ID_FRAGMENT_MODEL)
  references CMD_MFE.CON_FRAGMENT_MODEL (ID_FRAGMENT_MODEL) on delete cascade;
alter table CMD_MFE.CON_FRAGMENT_MODEL_COV
  add constraint CS_CON_FR_MO_COV_OPERATOR
  check (operator IN (
              '<',
              '<=',
              '=',
              '>=',
              '>',
              '<>'
        ));
grant select, insert, update, delete on CMD_MFE.CON_FRAGMENT_MODEL_COV to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_FRAGMENT_MODEL_COV to DBDEVELOP;
grant select on CMD_MFE.CON_FRAGMENT_MODEL_COV to DBREAD;

prompt
prompt Creating table CON_FULFILLMENT
prompt ==============================
prompt
create table CMD_MFE.CON_FULFILLMENT
(
  id_cond      NUMBER(16) not null,
  status       VARCHAR2(50) not null,
  comment_text VARCHAR2(2000) not null,
  created_by   CHAR(9) not null,
  created_at   DATE default SYSDATE not null
)
;
comment on table CMD_MFE.CON_FULFILLMENT
  is 'PlnÏnÌ podmÌnky';
comment on column CMD_MFE.CON_FULFILLMENT.id_cond
  is 'ID podminky';
comment on column CMD_MFE.CON_FULFILLMENT.created_by
  is 'SSO uzivatele';
alter table CMD_MFE.CON_FULFILLMENT
  add constraint PK_FULFILLMENT primary key (ID_COND);
alter table CMD_MFE.CON_FULFILLMENT
  add constraint FK_FULFILLMENT_COND foreign key (ID_COND)
  references CMD_MFE.CON_COND (ID_COND);
grant select on CMD_MFE.CON_FULFILLMENT to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_FULFILLMENT to DBDEVELOP;
grant select on CMD_MFE.CON_FULFILLMENT to DBREAD;

prompt
prompt Creating table CON_GEN_CONDS_ADD
prompt ================================
prompt
create table CMD_MFE.CON_GEN_CONDS_ADD
(
  gen_cond_code  VARCHAR2(7) not null,
  id_group_model NUMBER(16) not null
)
;
comment on column CMD_MFE.CON_GEN_CONDS_ADD.gen_cond_code
  is 'reg. ËÌslo generujcÌ podmÌnky';
comment on column CMD_MFE.CON_GEN_CONDS_ADD.id_group_model
  is 'ID GenerovanÈ skupiny';
alter table CMD_MFE.CON_GEN_CONDS_ADD
  add constraint PK_GEN_CONDS primary key (GEN_COND_CODE, ID_GROUP_MODEL);
alter table CMD_MFE.CON_GEN_CONDS_ADD
  add constraint FK_CON_GEN_CONDS_ADD2CONDS foreign key (GEN_COND_CODE)
  references CMD_MFE.CON_COND_PROPS (CODE) on delete cascade;
grant select, insert, update, delete on CMD_MFE.CON_GEN_CONDS_ADD to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_GEN_CONDS_ADD to DBDEVELOP;
grant select on CMD_MFE.CON_GEN_CONDS_ADD to DBREAD;

prompt
prompt Creating table CON_GROUP_MODEL_VER_STATUS
prompt =========================================
prompt
create table CMD_MFE.CON_GROUP_MODEL_VER_STATUS
(
  id_group_model_ver INTEGER not null,
  enviroment         VARCHAR2(15) not null,
  status             VARCHAR2(15),
  created_at         DATE,
  created_by         VARCHAR2(10),
  updated_at         DATE,
  updated_by         VARCHAR2(10)
)
;
alter table CMD_MFE.CON_GROUP_MODEL_VER_STATUS
  add constraint PK_GROUP_MODEL_VER_STATUS primary key (ID_GROUP_MODEL_VER, ENVIROMENT);
alter table CMD_MFE.CON_GROUP_MODEL_VER_STATUS
  add constraint CS_GROUP_VER_ENV
  check (ENVIROMENT in ('MFE','TST','LIVE','TST2','UAM'));
alter table CMD_MFE.CON_GROUP_MODEL_VER_STATUS
  add constraint CS_GROUP_VER_STATUS
  check (STATUS in ('VALID','EDITED','INVALID','N_A'));
grant select, insert, update, delete on CMD_MFE.CON_GROUP_MODEL_VER_STATUS to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_GROUP_MODEL_VER_STATUS to DBDEVELOP;
grant select on CMD_MFE.CON_GROUP_MODEL_VER_STATUS to DBREAD;

prompt
prompt Creating table CON_LIST_CODE
prompt ============================
prompt
create table CMD_MFE.CON_LIST_CODE
(
  id_list_code INTEGER not null,
  code         VARCHAR2(100) not null,
  item         VARCHAR2(250) not null,
  value        VARCHAR2(250) not null,
  valid        VARCHAR2(1) default 'Y' not null
)
;
comment on table CMD_MFE.CON_LIST_CODE
  is 'Seznam cisleniku';
comment on column CMD_MFE.CON_LIST_CODE.id_list_code
  is 'ID polozky cisleniku';
comment on column CMD_MFE.CON_LIST_CODE.code
  is 'Jmeno ciselniku';
comment on column CMD_MFE.CON_LIST_CODE.item
  is 'Jmeno polozky ciselniku';
comment on column CMD_MFE.CON_LIST_CODE.value
  is 'Hodnota polozky';
comment on column CMD_MFE.CON_LIST_CODE.valid
  is 'Platnost polozky';
alter table CMD_MFE.CON_LIST_CODE
  add constraint PK_CON_LIST_CODE primary key (ID_LIST_CODE);
alter table CMD_MFE.CON_LIST_CODE
  add constraint CS_CON_LIST_CODE_VALID
  check (valid IN ('Y','N'));
grant select, insert, update, delete on CMD_MFE.CON_LIST_CODE to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_LIST_CODE to DBDEVELOP;
grant select on CMD_MFE.CON_LIST_CODE to DBREAD;

prompt
prompt Creating table CON_TEMPLATE_VER
prompt ===============================
prompt
create table CMD_MFE.CON_TEMPLATE_VER
(
  id_template_ver NUMBER(16) not null,
  id_template     NUMBER(16) not null
)
;
comment on table CMD_MFE.CON_TEMPLATE_VER
  is 'Verze öalony';
comment on column CMD_MFE.CON_TEMPLATE_VER.id_template_ver
  is 'ID verze öablony';
comment on column CMD_MFE.CON_TEMPLATE_VER.id_template
  is 'Id öablony';
alter table CMD_MFE.CON_TEMPLATE_VER
  add constraint PK_TEMPLATE_VER_ID primary key (ID_TEMPLATE_VER);
alter table CMD_MFE.CON_TEMPLATE_VER
  add constraint UQ_TEMP_TEMP_VER unique (ID_TEMPLATE, ID_TEMPLATE_VER);
grant select, insert, update on CMD_MFE.CON_TEMPLATE_VER to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_TEMPLATE_VER to DBDEVELOP;
grant select on CMD_MFE.CON_TEMPLATE_VER to DBREAD;

prompt
prompt Creating table CON_LOAN_OBJECT2TPL_VER
prompt ======================================
prompt
create table CMD_MFE.CON_LOAN_OBJECT2TPL_VER
(
  loan_object             VARCHAR2(50) not null,
  loan_type               VARCHAR2(50),
  id_template_ver         NUMBER(16) not null,
  id_loan_object2template NUMBER not null,
  loan_purpose            VARCHAR2(50),
  prop_type               VARCHAR2(50)
)
;
comment on table CMD_MFE.CON_LOAN_OBJECT2TPL_VER
  is 'Vazba objektu uveru na sablonu';
comment on column CMD_MFE.CON_LOAN_OBJECT2TPL_VER.loan_object
  is 'Objekt uveru';
comment on column CMD_MFE.CON_LOAN_OBJECT2TPL_VER.loan_type
  is 'Typ uveru (HCisKomTypUveru)';
comment on column CMD_MFE.CON_LOAN_OBJECT2TPL_VER.id_template_ver
  is 'ID verze sablony';
comment on column CMD_MFE.CON_LOAN_OBJECT2TPL_VER.id_loan_object2template
  is 'Primarni klic tabulky con_loan_object2template';
comment on column CMD_MFE.CON_LOAN_OBJECT2TPL_VER.loan_purpose
  is 'Ucel uveru (HCisUcelUveruSME)';
comment on column CMD_MFE.CON_LOAN_OBJECT2TPL_VER.prop_type
  is 'Typ navrhu (HCisKomTypNavrhu)';
alter table CMD_MFE.CON_LOAN_OBJECT2TPL_VER
  add constraint PK_CON_LOAN_O2T primary key (ID_LOAN_OBJECT2TEMPLATE);
alter table CMD_MFE.CON_LOAN_OBJECT2TPL_VER
  add constraint CS_LOAN_OBJECT2TEMPLATE_UQ unique (LOAN_OBJECT, ID_TEMPLATE_VER, LOAN_TYPE, LOAN_PURPOSE, PROP_TYPE);
alter table CMD_MFE.CON_LOAN_OBJECT2TPL_VER
  add constraint FK_LO2T_TEMPLATE foreign key (ID_TEMPLATE_VER)
  references CMD_MFE.CON_TEMPLATE_VER (ID_TEMPLATE_VER) on delete cascade;
grant select, insert, update, delete on CMD_MFE.CON_LOAN_OBJECT2TPL_VER to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_LOAN_OBJECT2TPL_VER to DBDEVELOP;
grant select on CMD_MFE.CON_LOAN_OBJECT2TPL_VER to DBREAD;

prompt
prompt Creating table CON_PROP_CONTEXT
prompt ===============================
prompt
create table CMD_MFE.CON_PROP_CONTEXT
(
  id_prop_attr VARCHAR2(64) not null,
  value        VARCHAR2(32) not null,
  grouping     NUMBER(16)
)
;
comment on table CMD_MFE.CON_PROP_CONTEXT
  is 'Tabulka pro uloûenÌ dat n·vrhu pro kalkulaËky (data se p¯emaz·vajÌ)';
comment on column CMD_MFE.CON_PROP_CONTEXT.id_prop_attr
  is 'ID atributu';
comment on column CMD_MFE.CON_PROP_CONTEXT.value
  is 'Hodnota';
comment on column CMD_MFE.CON_PROP_CONTEXT.grouping
  is 'ID podle kterÈho jsou logicky seskupeny opakujÌcÌ se hodnoty atribut˘';
alter table CMD_MFE.CON_PROP_CONTEXT
  add constraint CS_PROP_CONTEXT_GROUPING
  check (grouping > 0);
grant select on CMD_MFE.CON_PROP_CONTEXT to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_PROP_CONTEXT to DBDEVELOP;
grant select on CMD_MFE.CON_PROP_CONTEXT to DBREAD;

prompt
prompt Creating table CON_STATIC_CHECK_MODEL
prompt =====================================
prompt
create table CMD_MFE.CON_STATIC_CHECK_MODEL
(
  id_check_model NUMBER(16) not null,
  text           VARCHAR2(1024 CHAR) not null,
  mandatory      NUMBER(1) default 1 not null,
  user_order     INTEGER not null
)
;
comment on column CMD_MFE.CON_STATIC_CHECK_MODEL.id_check_model
  is 'Id vzoru checku';
comment on column CMD_MFE.CON_STATIC_CHECK_MODEL.text
  is 'Text';
comment on column CMD_MFE.CON_STATIC_CHECK_MODEL.mandatory
  is 'Povinnost vyplnÏnÌ datum u instance plnÏnÌ checku';
comment on column CMD_MFE.CON_STATIC_CHECK_MODEL.user_order
  is 'Uzivatelsky definovane poradi statickych checklistu';
alter table CMD_MFE.CON_STATIC_CHECK_MODEL
  add constraint PK_STATIC_CHECK_MODEL primary key (ID_CHECK_MODEL);
alter table CMD_MFE.CON_STATIC_CHECK_MODEL
  add constraint FK_S_CH_M_CHECK_MODEL foreign key (ID_CHECK_MODEL)
  references CMD_MFE.CON_CHECK_MODEL (ID) on delete cascade;
alter table CMD_MFE.CON_STATIC_CHECK_MODEL
  add constraint CS_S_CH_M_MANDATORY
  check (mandatory IN (0, 1));
grant select on CMD_MFE.CON_STATIC_CHECK_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_STATIC_CHECK_MODEL to DBDEVELOP;
grant select on CMD_MFE.CON_STATIC_CHECK_MODEL to DBREAD;

prompt
prompt Creating table CON_SCHM2LOAN_OBJECT
prompt ===================================
prompt
create table CMD_MFE.CON_SCHM2LOAN_OBJECT
(
  id_check_model NUMBER(16) not null,
  loan_object    VARCHAR2(50) not null,
  include        NUMBER(1) not null
)
;
comment on column CMD_MFE.CON_SCHM2LOAN_OBJECT.id_check_model
  is 'Id vzoru checku';
comment on column CMD_MFE.CON_SCHM2LOAN_OBJECT.loan_object
  is 'Objekt uveru';
comment on column CMD_MFE.CON_SCHM2LOAN_OBJECT.include
  is 'Druh v˝jimky (1..pouze u tÏchto objetk˘ ˙vÏru, 0..nikdy u tÏchto objekt˘  ˙vÏru)';
alter table CMD_MFE.CON_SCHM2LOAN_OBJECT
  add constraint PK_SCHM2LOAN_OBJECT primary key (ID_CHECK_MODEL, LOAN_OBJECT);
alter table CMD_MFE.CON_SCHM2LOAN_OBJECT
  add constraint FK_SCHM2L_O_CHECK_MODEL foreign key (ID_CHECK_MODEL)
  references CMD_MFE.CON_STATIC_CHECK_MODEL (ID_CHECK_MODEL) on delete cascade;
alter table CMD_MFE.CON_SCHM2LOAN_OBJECT
  add constraint CS_SCHM2LOAN_OBJECT_INCLUDE
  check (include IN (0, 1));
grant select on CMD_MFE.CON_SCHM2LOAN_OBJECT to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_SCHM2LOAN_OBJECT to DBDEVELOP;
grant select on CMD_MFE.CON_SCHM2LOAN_OBJECT to DBREAD;

prompt
prompt Creating table CON_TEMPLATE
prompt ===========================
prompt
create table CMD_MFE.CON_TEMPLATE
(
  id_template      NUMBER(16) not null,
  default_template NUMBER(1),
  description      VARCHAR2(2000) not null,
  name             VARCHAR2(250),
  short            VARCHAR2(250),
  mfestatus        VARCHAR2(15),
  valid            NUMBER default 1 not null,
  id_current_ver   NUMBER(16)
)
;
comment on table CMD_MFE.CON_TEMPLATE
  is 'äablona';
comment on column CMD_MFE.CON_TEMPLATE.id_template
  is 'ID';
comment on column CMD_MFE.CON_TEMPLATE.default_template
  is 'priznak ze jde o defaultni sablonu (1)';
comment on column CMD_MFE.CON_TEMPLATE.description
  is 'Popis';
comment on column CMD_MFE.CON_TEMPLATE.name
  is 'Zkratka';
comment on column CMD_MFE.CON_TEMPLATE.mfestatus
  is 'Stav sablony na prostredi MFE';
comment on column CMD_MFE.CON_TEMPLATE.valid
  is 'Priznak platnosti sablony';
comment on column CMD_MFE.CON_TEMPLATE.id_current_ver
  is 'Id aktu·lnÌ verze öablony';
alter table CMD_MFE.CON_TEMPLATE
  add constraint PK_TEMPLATE_ID primary key (ID_TEMPLATE);
alter table CMD_MFE.CON_TEMPLATE
  add constraint CS_TEMPLATE_DEFAULT_TEMPL_UQ unique (DEFAULT_TEMPLATE);
alter table CMD_MFE.CON_TEMPLATE
  add constraint FK_TEMPLATE_CURRENT_VER foreign key (ID_CURRENT_VER)
  references CMD_MFE.CON_TEMPLATE_VER (ID_TEMPLATE_VER) on delete cascade
  deferrable initially deferred;
alter table CMD_MFE.CON_TEMPLATE
  add constraint CK_CON_TEMPLATE_VALID
  check (VALID IN ('0','1'));
alter table CMD_MFE.CON_TEMPLATE
  add constraint CS_TEMPLATE_DEFAULT_TEMPL_CH
  check (default_template = 1);
grant select, insert, update, delete on CMD_MFE.CON_TEMPLATE to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_TEMPLATE to DBDEVELOP;
grant select on CMD_MFE.CON_TEMPLATE to DBREAD;

prompt
prompt Creating table CON_TEMPLATE_STATUS
prompt ==================================
prompt
create table CMD_MFE.CON_TEMPLATE_STATUS
(
  id_template_status NUMBER not null,
  id_template        NUMBER not null,
  enviroment         VARCHAR2(15) not null,
  status             VARCHAR2(15),
  created_at         DATE,
  created_by         VARCHAR2(10),
  updated_at         DATE,
  updated_by         VARCHAR2(10)
)
;
alter table CMD_MFE.CON_TEMPLATE_STATUS
  add constraint PK_TEMPLATE_STATUS primary key (ID_TEMPLATE_STATUS, ID_TEMPLATE, ENVIROMENT);
alter table CMD_MFE.CON_TEMPLATE_STATUS
  add constraint CS_TEMPLATE_STATUS_ENV
  check (ENVIROMENT in ('MFE','TST','LIVE','TST2','UAM'));
alter table CMD_MFE.CON_TEMPLATE_STATUS
  add constraint CS_TEMPLATE_STATUS_STATUS
  check (STATUS in ('VALID','EDITED','INVALID','N_A'));
grant select, insert, update, delete on CMD_MFE.CON_TEMPLATE_STATUS to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_TEMPLATE_STATUS to DBDEVELOP;
grant select on CMD_MFE.CON_TEMPLATE_STATUS to DBREAD;

prompt
prompt Creating table CON_TEMPLATE_VER_STATUS
prompt ======================================
prompt
create table CMD_MFE.CON_TEMPLATE_VER_STATUS
(
  id_template_ver NUMBER not null,
  enviroment      VARCHAR2(15) not null,
  status          VARCHAR2(15) not null,
  created_at      DATE,
  created_by      VARCHAR2(10),
  updated_at      DATE,
  updated_by      VARCHAR2(10)
)
;
comment on table CMD_MFE.CON_TEMPLATE_VER_STATUS
  is 'Stav verze öalony';
comment on column CMD_MFE.CON_TEMPLATE_VER_STATUS.id_template_ver
  is 'ID verze öablony';
comment on column CMD_MFE.CON_TEMPLATE_VER_STATUS.enviroment
  is 'Prost¯edÌ (MFE/TST/LIVE)';
comment on column CMD_MFE.CON_TEMPLATE_VER_STATUS.status
  is 'Stav (EIDTED/VALID/INVALID/N_A)';
comment on column CMD_MFE.CON_TEMPLATE_VER_STATUS.created_at
  is 'Vytvo¯eno kdy';
comment on column CMD_MFE.CON_TEMPLATE_VER_STATUS.created_by
  is 'Vytvo¯eno k˝m';
comment on column CMD_MFE.CON_TEMPLATE_VER_STATUS.updated_at
  is 'Upraveno kdy';
comment on column CMD_MFE.CON_TEMPLATE_VER_STATUS.updated_by
  is 'Upraveno k˝m';
alter table CMD_MFE.CON_TEMPLATE_VER_STATUS
  add constraint PK_TEMPLATE_VER_STATUS primary key (ID_TEMPLATE_VER, ENVIROMENT, STATUS);
alter table CMD_MFE.CON_TEMPLATE_VER_STATUS
  add constraint CS_TEMPLATE_VER_STATUS_ENV
  check (ENVIROMENT in ('MFE','TST','LIVE','TST2','UAM'));
alter table CMD_MFE.CON_TEMPLATE_VER_STATUS
  add constraint CS_TEMPLATE_VER_STATUS_STATUS
  check (STATUS in ('VALID','EDITED','INVALID','N_A'));
grant select, insert, update, delete on CMD_MFE.CON_TEMPLATE_VER_STATUS to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_TEMPLATE_VER_STATUS to DBDEVELOP;
grant select on CMD_MFE.CON_TEMPLATE_VER_STATUS to DBREAD;

prompt
prompt Creating table CON_TERM_ACTION
prompt ==============================
prompt
create table CMD_MFE.CON_TERM_ACTION
(
  id_term_action   NUMBER(16) not null,
  title            VARCHAR2(64),
  monitoring       VARCHAR2(50) not null,
  title_declension VARCHAR2(64) not null,
  code             VARCHAR2(50)
)
;
comment on table CMD_MFE.CON_TERM_ACTION
  is 'Akce vazici se na termin';
comment on column CMD_MFE.CON_TERM_ACTION.id_term_action
  is 'ID';
comment on column CMD_MFE.CON_TERM_ACTION.title
  is 'N·zev';
comment on column CMD_MFE.CON_TERM_ACTION.monitoring
  is 'Monitorovani akce';
comment on column CMD_MFE.CON_TERM_ACTION.title_declension
  is 'SkloÚov·nÌ n·zvu';
comment on column CMD_MFE.CON_TERM_ACTION.code
  is 'Kod akce';
alter table CMD_MFE.CON_TERM_ACTION
  add constraint PK_TERM_ACTION primary key (ID_TERM_ACTION);
alter table CMD_MFE.CON_TERM_ACTION
  add constraint CS_TERM_ACTION_MONITORING
  check (monitoring IN (
            'SYSTEM',
            'NON_SYSTEM'
        ));
grant select on CMD_MFE.CON_TERM_ACTION to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_TERM_ACTION to DBDEVELOP;
grant select on CMD_MFE.CON_TERM_ACTION to DBREAD;

prompt
prompt Creating table CON_TERM_PERIOD_MODEL
prompt ====================================
prompt
create table CMD_MFE.CON_TERM_PERIOD_MODEL
(
  period_code      VARCHAR2(50) not null,
  period_desc      VARCHAR2(4000),
  ordering         NUMBER,
  in_months        INTEGER,
  period_type      VARCHAR2(50),
  period_textation VARCHAR2(2000)
)
;
comment on table CMD_MFE.CON_TERM_PERIOD_MODEL
  is 'Frekvence opakovani, jenz lze zadat kovanantam do CON_TERM dle HCisFrekvenceOpakovaniPodm';
comment on column CMD_MFE.CON_TERM_PERIOD_MODEL.period_code
  is 'Kod z [HCisFrekvenceOpakovaniPodm]';
comment on column CMD_MFE.CON_TERM_PERIOD_MODEL.period_desc
  is 'Popis z [HCisFrekvenceOpakovaniPodm]';
comment on column CMD_MFE.CON_TERM_PERIOD_MODEL.ordering
  is 'Poradi z [HCisFrekvenceOpakovaniPodm]';
comment on column CMD_MFE.CON_TERM_PERIOD_MODEL.in_months
  is 'Perioda prepocitana v mesicich';
comment on column CMD_MFE.CON_TERM_PERIOD_MODEL.period_type
  is 'Zda se jedna o kalendarni nebo nekalendarni peridou';
comment on column CMD_MFE.CON_TERM_PERIOD_MODEL.period_textation
  is 'Textace, jenz se zkopiruje do CON_FRAGMENT.VALUE';
alter table CMD_MFE.CON_TERM_PERIOD_MODEL
  add constraint PK_TERM_PERIOD_MODEL_CODE primary key (PERIOD_CODE);
alter table CMD_MFE.CON_TERM_PERIOD_MODEL
  add constraint UQ_TERM_PERIOD_MODEL_DESC unique (PERIOD_DESC);
alter table CMD_MFE.CON_TERM_PERIOD_MODEL
  add constraint CK_PERIOD_TYPE
  check ( PERIOD_TYPE IN ('CALENDAR','NON-CALENDAR'));
grant select on CMD_MFE.CON_TERM_PERIOD_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_TERM_PERIOD_MODEL to DBDEVELOP;
grant select on CMD_MFE.CON_TERM_PERIOD_MODEL to DBREAD;

prompt
prompt Creating table CON_TERM_MODEL
prompt =============================
prompt
create table CMD_MFE.CON_TERM_MODEL
(
  id_term_model          NUMBER(16) not null,
  id_cond_model_ver      NUMBER(16) not null,
  unit_count_default     NUMBER(4),
  unit_count_editable    NUMBER(1) default 1 not null,
  period_default         VARCHAR2(50),
  period_editable        NUMBER(1) default 1 not null,
  day_in_period_default  NUMBER(3),
  day_in_period_editable NUMBER(1) default 1 not null,
  time_unit_default      VARCHAR2(50),
  time_unit_editable     NUMBER(1) default 1 not null,
  textation_type         VARCHAR2(10)
)
;
comment on table CMD_MFE.CON_TERM_MODEL
  is 'Vzor terminu';
comment on column CMD_MFE.CON_TERM_MODEL.id_term_model
  is 'ID';
comment on column CMD_MFE.CON_TERM_MODEL.id_cond_model_ver
  is 'ID vzoru podminky';
comment on column CMD_MFE.CON_TERM_MODEL.unit_count_default
  is 'Default pro poËet Ëasov˝ch jednotek';
comment on column CMD_MFE.CON_TERM_MODEL.unit_count_editable
  is 'P¯Ìznak editovatelnosti';
comment on column CMD_MFE.CON_TERM_MODEL.period_default
  is 'Default pro frekvence opakovanÌ (perioda)';
comment on column CMD_MFE.CON_TERM_MODEL.period_editable
  is 'P¯Ìznak editovatelnosti';
comment on column CMD_MFE.CON_TERM_MODEL.day_in_period_default
  is 'Default pro den v periodÏ';
comment on column CMD_MFE.CON_TERM_MODEL.day_in_period_editable
  is 'P¯Ìznak editovatelnosti';
comment on column CMD_MFE.CON_TERM_MODEL.time_unit_default
  is 'Default pro typ ËasovÈ jednotky';
comment on column CMD_MFE.CON_TERM_MODEL.time_unit_editable
  is 'P¯Ìznak editovatelnosti';
comment on column CMD_MFE.CON_TERM_MODEL.textation_type
  is 'Typ textace';
create index CMD_MFE.IX_TERM_MODEL_COND_MODEL_VER on CMD_MFE.CON_TERM_MODEL (ID_COND_MODEL_VER);
alter table CMD_MFE.CON_TERM_MODEL
  add constraint PK_TERM_MODEL_ID primary key (ID_TERM_MODEL);
alter table CMD_MFE.CON_TERM_MODEL
  add constraint FK_TERM_MODEL_COND_MODEL_VER foreign key (ID_COND_MODEL_VER)
  references CMD_MFE.CON_COND_MODEL_VER (ID_COND_MODEL_VER) on delete cascade;
alter table CMD_MFE.CON_TERM_MODEL
  add constraint FK_TERM_MODEL2PERIDO_DEFAULT foreign key (PERIOD_DEFAULT)
  references CMD_MFE.CON_TERM_PERIOD_MODEL (PERIOD_CODE);
alter table CMD_MFE.CON_TERM_MODEL
  add constraint CS_TERM_MODEL_DIPD
  check (day_in_period_default > 0);
alter table CMD_MFE.CON_TERM_MODEL
  add constraint CS_TERM_MODEL_DIPE
  check (day_in_period_editable IN (0, 1));
alter table CMD_MFE.CON_TERM_MODEL
  add constraint CS_TERM_MODEL_PE
  check (period_editable IN (0, 1));
alter table CMD_MFE.CON_TERM_MODEL
  add constraint CS_TERM_MODEL_TUD
  check (time_unit_default IN (
            'CAL_DAY',
            'WORK_DAY',
            'MONTH'
        ));
alter table CMD_MFE.CON_TERM_MODEL
  add constraint CS_TERM_MODEL_TUE
  check (time_unit_editable IN (0, 1));
alter table CMD_MFE.CON_TERM_MODEL
  add constraint CS_TERM_MODEL_UCD
  check (unit_count_default > 0);
alter table CMD_MFE.CON_TERM_MODEL
  add constraint CS_TERM_MODEL_UCE
  check (unit_count_editable IN (0, 1));
grant select, insert, update, delete on CMD_MFE.CON_TERM_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_TERM_MODEL to DBDEVELOP;
grant select on CMD_MFE.CON_TERM_MODEL to DBREAD;

prompt
prompt Creating table CON_TERM_MODEL_RULE
prompt ==================================
prompt
create table CMD_MFE.CON_TERM_MODEL_RULE
(
  id_term_model   NUMBER(16) not null,
  rule            VARCHAR2(50) not null,
  action_default  NUMBER(16),
  action_editable NUMBER(1) not null
)
;
comment on table CMD_MFE.CON_TERM_MODEL_RULE
  is 'Pravidla pro vzory terminu';
comment on column CMD_MFE.CON_TERM_MODEL_RULE.id_term_model
  is 'ID vzoru terminu';
comment on column CMD_MFE.CON_TERM_MODEL_RULE.rule
  is 'Pravidlo';
comment on column CMD_MFE.CON_TERM_MODEL_RULE.action_default
  is 'Defaultni akce';
comment on column CMD_MFE.CON_TERM_MODEL_RULE.action_editable
  is 'Priznak editovatelnosti';
create index CMD_MFE.IX_TMR_AD on CMD_MFE.CON_TERM_MODEL_RULE (ACTION_DEFAULT);
alter table CMD_MFE.CON_TERM_MODEL_RULE
  add constraint PK_TERM_MODEL_RULE primary key (ID_TERM_MODEL, RULE);
alter table CMD_MFE.CON_TERM_MODEL_RULE
  add constraint FK_TMR_AD foreign key (ACTION_DEFAULT)
  references CMD_MFE.CON_TERM_ACTION (ID_TERM_ACTION);
alter table CMD_MFE.CON_TERM_MODEL_RULE
  add constraint FK_TMR_TERM_MODEL foreign key (ID_TERM_MODEL)
  references CMD_MFE.CON_TERM_MODEL (ID_TERM_MODEL) on delete cascade;
alter table CMD_MFE.CON_TERM_MODEL_RULE
  add constraint CS_TMR_AE
  check (action_editable IN (0, 1));
alter table CMD_MFE.CON_TERM_MODEL_RULE
  add constraint FK_TMR_RULE
  check (rule IN (
            'ABSOLUTE',
            'AT_LATEST',
            'RELATIVE',
            'PERIODIC'
        ));
grant select, insert, update, delete on CMD_MFE.CON_TERM_MODEL_RULE to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_TERM_MODEL_RULE to DBDEVELOP;
grant select on CMD_MFE.CON_TERM_MODEL_RULE to DBREAD;

prompt
prompt Creating table CON_TPL_VER2GROUP_MODEL
prompt ======================================
prompt
create table CMD_MFE.CON_TPL_VER2GROUP_MODEL
(
  id_template_ver NUMBER(16) not null,
  id_group_model  NUMBER(16) not null
)
;
comment on table CMD_MFE.CON_TPL_VER2GROUP_MODEL
  is 'Vazba verze öablony na vzor skupiny';
comment on column CMD_MFE.CON_TPL_VER2GROUP_MODEL.id_template_ver
  is 'ID verze öablony';
comment on column CMD_MFE.CON_TPL_VER2GROUP_MODEL.id_group_model
  is 'ID vzoru skupiny';
alter table CMD_MFE.CON_TPL_VER2GROUP_MODEL
  add constraint PK_P2GM_ID primary key (ID_TEMPLATE_VER, ID_GROUP_MODEL);
alter table CMD_MFE.CON_TPL_VER2GROUP_MODEL
  add constraint FK_P2GM_GROUP_MODEL foreign key (ID_GROUP_MODEL)
  references CMD_MFE.CON_GROUP_MODEL (ID_GROUP_MODEL) on delete cascade;
alter table CMD_MFE.CON_TPL_VER2GROUP_MODEL
  add constraint FK_P2GM_TEMPLATE foreign key (ID_TEMPLATE_VER)
  references CMD_MFE.CON_TEMPLATE_VER (ID_TEMPLATE_VER) on delete cascade;
grant select, insert, update, delete on CMD_MFE.CON_TPL_VER2GROUP_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.CON_TPL_VER2GROUP_MODEL to DBDEVELOP;
grant select on CMD_MFE.CON_TPL_VER2GROUP_MODEL to DBREAD;

prompt
prompt Creating sequence SEQ_CON_CATEGORY
prompt ==================================
prompt
create sequence CMD_MFE.SEQ_CON_CATEGORY
minvalue 1
maxvalue 999999999999999999999999999
start with 133
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_CATEGORY to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_CATEGORY to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_CATEGORY to DBREAD;


prompt
prompt Creating sequence SEQ_CON_CHECK_MODEL
prompt =====================================
prompt
create sequence CMD_MFE.SEQ_CON_CHECK_MODEL
minvalue 1
maxvalue 999999999999999999999999999
start with 5972
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_CHECK_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_CHECK_MODEL to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_CHECK_MODEL to DBREAD;


prompt
prompt Creating sequence SEQ_CON_COND_MODEL
prompt ====================================
prompt
create sequence CMD_MFE.SEQ_CON_COND_MODEL
minvalue 1
maxvalue 999999999999999999999999999
start with 6710
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_COND_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_COND_MODEL to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_COND_MODEL to DBREAD;


prompt
prompt Creating sequence SEQ_CON_COND_MODEL_VER
prompt ========================================
prompt
create sequence CMD_MFE.SEQ_CON_COND_MODEL_VER
minvalue 1
maxvalue 999999999999999999999999999
start with 15484
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_COND_MODEL_VER to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_COND_MODEL_VER to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_COND_MODEL_VER to DBREAD;


prompt
prompt Creating sequence SEQ_CON_COND_PROPS
prompt ====================================
prompt
create sequence CMD_MFE.SEQ_CON_COND_PROPS
minvalue 1
maxvalue 999999999999999999999999999
start with 100000003306
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_COND_PROPS to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_COND_PROPS to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_COND_PROPS to DBREAD;


prompt
prompt Creating sequence SEQ_CON_DOC_TYPE
prompt ==================================
prompt
create sequence CMD_MFE.SEQ_CON_DOC_TYPE
minvalue 1
maxvalue 999999999999999999999999999
start with 7684
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_DOC_TYPE to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_DOC_TYPE to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_DOC_TYPE to DBREAD;


prompt
prompt Creating sequence SEQ_CON_EXPR
prompt ==============================
prompt
create sequence CMD_MFE.SEQ_CON_EXPR
minvalue 1
maxvalue 9999999999999999999999999999
start with 800764
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_EXPR to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_EXPR to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_EXPR to DBREAD;


prompt
prompt Creating sequence SEQ_CON_EXPR_ELEMENT
prompt ======================================
prompt
create sequence CMD_MFE.SEQ_CON_EXPR_ELEMENT
minvalue 1
maxvalue 999999999999999999999999999
start with 7507848
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_EXPR_ELEMENT to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_EXPR_ELEMENT to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_EXPR_ELEMENT to DBREAD;


prompt
prompt Creating sequence SEQ_CON_FRAGMENT_MODEL
prompt ========================================
prompt
create sequence CMD_MFE.SEQ_CON_FRAGMENT_MODEL
minvalue 1
maxvalue 999999999999999999999999999
start with 42937
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_FRAGMENT_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_FRAGMENT_MODEL to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_FRAGMENT_MODEL to DBREAD;


prompt
prompt Creating sequence SEQ_CON_GROUP_MODEL
prompt =====================================
prompt
create sequence CMD_MFE.SEQ_CON_GROUP_MODEL
minvalue 1
maxvalue 999999999999999999999999999
start with 3746
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_GROUP_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_GROUP_MODEL to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_GROUP_MODEL to DBREAD;


prompt
prompt Creating sequence SEQ_CON_GROUP_MODEL_VER
prompt =========================================
prompt
create sequence CMD_MFE.SEQ_CON_GROUP_MODEL_VER
minvalue 1
maxvalue 999999999999999999999999999
start with 5742
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_GROUP_MODEL_VER to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_GROUP_MODEL_VER to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_GROUP_MODEL_VER to DBREAD;


prompt
prompt Creating sequence SEQ_CON_LOAN_O2T
prompt ==================================
prompt
create sequence CMD_MFE.SEQ_CON_LOAN_O2T
minvalue 1
maxvalue 999999999999999999999999999
start with 6140
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_LOAN_O2T to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_LOAN_O2T to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_LOAN_O2T to DBREAD;


prompt
prompt Creating sequence SEQ_CON_TEMPLATE
prompt ==================================
prompt
create sequence CMD_MFE.SEQ_CON_TEMPLATE
minvalue 1
maxvalue 999999999999999999999999999
start with 380
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_TEMPLATE to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_TEMPLATE to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_TEMPLATE to DBREAD;


prompt
prompt Creating sequence SEQ_CON_TEMPLATE_STATUS
prompt =========================================
prompt
create sequence CMD_MFE.SEQ_CON_TEMPLATE_STATUS
minvalue 1
maxvalue 999999999999999999999999999
start with 428
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_TEMPLATE_STATUS to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_TEMPLATE_STATUS to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_TEMPLATE_STATUS to DBREAD;


prompt
prompt Creating sequence SEQ_CON_TEMPLATE_VER
prompt ======================================
prompt
create sequence CMD_MFE.SEQ_CON_TEMPLATE_VER
minvalue 1
maxvalue 999999999999999999999999999
start with 3340
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_TEMPLATE_VER to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_TEMPLATE_VER to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_TEMPLATE_VER to DBREAD;


prompt
prompt Creating sequence SEQ_CON_TERM_MODEL
prompt ====================================
prompt
create sequence CMD_MFE.SEQ_CON_TERM_MODEL
minvalue 1
maxvalue 999999999999999999999999999
start with 7678
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_CON_TERM_MODEL to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_CON_TERM_MODEL to DBDEVELOP;
grant select on CMD_MFE.SEQ_CON_TERM_MODEL to DBREAD;


prompt
prompt Creating sequence SEQ_DOC_TYPE_CATEGORY
prompt =======================================
prompt
create sequence CMD_MFE.SEQ_DOC_TYPE_CATEGORY
minvalue 1
maxvalue 999999999999999999999999999
start with 100
increment by 1
cache 20;
grant select on CMD_MFE.SEQ_DOC_TYPE_CATEGORY to CMD_MFE_INTERFACE;
grant select on CMD_MFE.SEQ_DOC_TYPE_CATEGORY to DBDEVELOP;
grant select on CMD_MFE.SEQ_DOC_TYPE_CATEGORY to DBREAD;



spool off
